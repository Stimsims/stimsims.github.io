(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"9RoH":function(e,t,i){"use strict";i("E5k/");var n=i("q1tI"),r=i.n(n),o=i("vOnD"),a=i("KZAx"),s=(i("pJf4"),i("ZMKu")),p=i("iZBq"),c=(i("OQUD"),{y:"-200px",opacity:0}),u={height:"100%",width:"100%",textAlign:"center",padding:"10px",position:"absolute"},l=function(e){var t=Object(n.useState)(null),i=t[0],o=t[1],l=Object(n.useState)(null),h=l[0],f=l[1];Object(n.useEffect)((function(){i&&e.speech&&e.speech.textId!==i.textId&&f(i),o(e.speech)}),[e.speech]);var g=function(e){var t="current"===e?i:h,n="ellipse(50% 50% at 50% 50%)";t.imageId||(n=null);var o=function(e){var t=Array.isArray(e)?e:[e],i="C";return t.map((function(e){e.indexOf("L")>-1?i="L":e.indexOf("R")>-1&&(i="R")})),t=["tC","iC"+i]}(t.animate||t.initial),s=function(e){var t=Array.isArray(e)?e:[e],i="C";return t.map((function(e){e.indexOf("R")>-1?i="R":e.indexOf("L")>-1&&(i="L")})),i}(t.animate||t.initial);if(t)return r.a.createElement(p.a,{key:t.textId,id:t.textId,initial:"current"===e?o:null,animate:"current"===e?"aC":"prevC",exit:"eC",override:null===h?{transition:{delay:2.1,duration:.5}}:null,top:"-5%",width:"100%"},r.a.createElement(m,{clip:n,color:t.color,name:t.name,orientation:s},r.a.createElement(d,null,r.a.createElement(a.a,{key:t.textId,id:t.textId,text:t.text}))))};return r.a.createElement(s.b.div,{key:e.id+"-convo",id:e.id+"-convo",style:u,exit:c,initial:c,animate:{opacity:1,y:0}},h&&g("previous"),i&&g("current"))},d=o.b.span.withConfig({displayName:"Speech__SpeechText",componentId:"sc-5f764k-0"})(["text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";width:100%;"],(function(e){return e.theme.text})),m=o.b.div.withConfig({displayName:"Speech__SpeechBubble",componentId:"sc-5f764k-1"})(["display:inline-block;position:relative;margin:auto;width:100%;max-width:",";min-height:",";overflow-y:auto;background-color:black;border-top:1px solid ",";border-left:3px solid ",";border-right:3px solid ",";border-bottom:8px solid ",";text-align:",";"," &:before{content:'","';color:",";padding:0px 20px;font-size:1em;top:-5px;position:relative;}"],(function(e){return e.theme.mediaL}),"230px",(function(e){return e.color||e.theme.primary}),(function(e){return e.color||e.theme.primary}),(function(e){return e.color||e.theme.primary}),(function(e){return e.color||e.theme.primary}),(function(e){return"R"===e.orientation?"right":"L"===e.orientation?"left":"center"}),(function(e){if(e.clip)return"border-radius:30px;"}),(function(e){return e.name}),(function(e){return e.color||e.theme.primary})),h=i("Zrqu"),f=(i("jIds"),i("cOeD")),g=i("Uhge"),v=i("Laee"),b=(i("dqgC"),t.a=function(e,t){return function(i){var n=function(e,t,i,n){return void 0===n&&(n=v.a),r.a.createElement(s.b.div,Object.assign({id:e,key:e,className:(t||"")+" item-large"},n),i)};return function(){var i,o,s,p,c,u,d,m,v=[];if(t.audio&&t.viewProps.doPlay(t.audio),t.img&&(v.push((i=t.img,(Array.isArray(i)?i:[i]).map((function(e){if(e.imageId)return r.a.createElement(g.a,Object.assign({id:e.id,key:e.id},e,{src:t.viewProps.images}))})))),v.push(function(e){return(Array.isArray(e)?e:[e]).map((function(e){if(e.textId)return r.a.createElement(l,{key:e.convoId+"-convo",id:e.convoId+"-convo",speech:e})}))}(t.img))),t.text){var w=t.textId||e;t.dialogue?v.push((u=t.dialogue,d=t.dialogueColor,m=t.text,n(e,null,r.a.createElement(y,{color:d},r.a.createElement(h.a,{className:"text-center",color:d,margin:"0",padding:"0",fontSize:"remM"},"-",u,"-"),r.a.createElement(a.a,{text:m,id:e+"-dialogue",color:d,className:"text-center",fontSize:"remM",viewProps:t.viewProps,settings:t.settings,mergeInput:t.makeChange})),b))):v.push(n(w+"-te1"," text-center",(o=w,s=t.text,p=t.text.onInput,c=t.text.out,r.a.createElement(a.a,{id:o,text:s,onInput:p,out:c,viewProps:t.viewProps,settings:t.settings,mergeInput:t.makeChange,className:"inline-block bg-text "+(t.textClassName||"")}))))}return t.extras&&t.extras.map((function(t,i){t&&v.push(n(t.id||e+"-extra-"+i,"",t))})),t.choice&&t.choice.options&&v.push(function(i,o,a,s,p,c,u){return n(e+"-ch","item-flex-end",r.a.createElement(x,null,r.a.createElement(f.a,{key:e+"-choice",id:e+"-choice",choices:i,onInput:o,out:a,randomize:p,fullWidth:c,bgColor:u,text:s,viewProps:t.viewProps,settings:t.settings,mergeInput:t.makeChange})))}(t.choice.options,t.choice.onInput,t.choice.out,t.choice.text,t.choice.randomize,t.choice.fullWidth,t.choice.bgColor)),v}()}},{initial:{opacity:0,y:100,flex:1,maxHeight:"85%",position:"absolute"},animate:{opacity:1,y:0,position:"relative",flex:1,maxHeight:"85%",transition:{delay:.5}},exit:{opacity:0,y:-100,position:"relative",maxHeight:"85%",flex:1},transition:{duration:.3,delay:0}}),x=o.b.div.withConfig({displayName:"Scene__ChoiceWrapper",componentId:"sc-1yrky7-0"})(["z-index:",";position:relative;"],(function(e){return e.theme.zUi})),y=o.b.div.withConfig({displayName:"Scene__Dialogue",componentId:"sc-1yrky7-1"})(["background-color:rgba(0,0,0,0.8);max-width:",";width:100%;max-height:100%;border:2px solid ",";border-bottom:9px solid ",";z-index:",";position:relative;overflow-y:auto;overflow-x:auto;box-sizing:border-box;"],(function(e){return e.theme.mediaL}),(function(e){return e.color||"blue"}),(function(e){return e.color||"blue"}),(function(e){return e.theme.zUi}))},DdlY:function(e,t,i){"use strict";i("pJf4"),i("q8oJ"),i("8npG"),i("YbXK"),i("cFtU"),i("rzGZ"),i("m210"),i("4DPX"),i("Kz6e");var n=i("q1tI"),r=i.n(n),o=i("vOnD"),a=i("NHW9"),s=i("EZnP"),p=i("ZMKu"),c=i("Szez"),u=i("OQUD"),l=i("FXkq");function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h={temp:{}};t.a=function(e){var t=Object(n.useState)({temp:e.addons||{}}),i=t[0],o=t[1],m=Object(n.useState)(null),g=m[0],v=m[1],b=Object(n.useState)({time:Date.now()})[0],x=function(e,t){var i=t;Object(u.f)("mygialogue onInput actions",i),i.hasOwnProperty("out")&&(i=i.out),Array.isArray(i)||(i=[i]),v(i)},y=Object(n.useState)(null),w=y[0],I=y[1],O=function(t,i,n,r,o,a,p,c){try{I(Object(s.a)(e.dialogue.dialogue(t,i||"dgstart",n,r,o,a,p,c)))}catch(u){throw console.error("Dialogue "+e.id+" error at node "+i+" ",u),Error("Dialogue "+e.id+" error at node "+i+" "+u.message)}};return Object(n.useEffect)((function(){e.merge&&v(e.merge)}),[e.merge]),Object(n.useEffect)((function(){if(g){Object(u.f)("dialogue inputs",i),a=i.temp.node||"start",s=Date.now(),Object(u.k)("dialogue-timing",e.id,a,s-b.time,null),b.time=s;var t=!1;g.map((function(e){e&&!0===e.end&&(t=!0)}));var n=Object(c.d)(i,i,g,e.viewProps.showUI);if(Object(u.f)("mygialogue makeChange mergeInputs",g),Object(u.f)("bughunt mcq mygialogue makeChange nInput",n),t){e.out&&(n=Object(c.d)(i,i,e.out,e.viewProps.showUI));var r=[];Object(c.b)("meta.simFields",e.read,e.write,[]).map((function(e){r.push({type:"merge",path:e,value:n[e]||n.temp[e]})})),e.dialogue.onExit&&(r=[].concat(d(r),d(e.dialogue.onExit(e.read,n,e.settings,e.viewProps)))),e.onExit&&(r=[].concat(d(r),d(e.onExit(e.id,n)))),delete n.temp,e.move&&(r=[].concat(d(r),[{type:"set",path:"move",value:{location:e.move}}])),Object(u.f)("bughunt mcq dialogue id "+e.id+" ending, merging actions",r),e.mergeInput(e.id,r),o(h)}else o(n),n.temp.flags=Object(l.a)(n.temp.flags||{},n.temp.node),O(e.id,n.temp.node,e.read,i,x,e.settings,e.viewProps,e.write.temp.flags);v(null)}else w||O(e.id,i.temp.node,e.read,i,x,e.settings,e.viewProps);var a,s}),[g,i,e.write,v,e.addons,x,e.id,e.settings,e.viewProps]),e.compact?r.a.createElement(f,{key:"dialogue-"+e.id,id:"dialogue-"+e.id,minHeight:e.minHeight},r.a.createElement(p.a,null,w)):r.a.createElement(a.a,{key:"dialogue-"+e.id,id:"dialogue-"+e.id},r.a.createElement(p.a,null,w))};var f=o.b.div.withConfig({displayName:"Dialogue__Wrapper",componentId:"sc-1mcwy7i-0"})(["border-top:2px solid red;border-bottom:2px solid red;z-index:",";padding:10px 0px;",""],(function(e){return e.theme.zMid}),(function(e){if(e.minHeight)return"min-height: "+e.minHeight}))},cOeD:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("HQhv"),i("pJf4"),i("YBKJ"),i("E5k/");var n=i("q1tI"),r=i.n(n),o=i("vOnD"),a=i("Mdna"),s=i("Zrqu");i("OQUD");function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=function(e){var t,i;function n(t){var i;return(i=e.call(this,t)||this).state=Object.assign({},t.randomize?i.getShuffledChoices(t.choices):{}),i.onInput=i.onInput.bind(p(i)),i.renderButton=i.renderButton.bind(p(i)),i}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=n.prototype;return o.componentWillUpdate=function(e,t){e.randomize&&this.props.id!==e.id&&this.props.choices!==e.choices&&(t.shuffled=this.getShuffledChoices(e.choices).shuffled)},o.getShuffledChoices=function(e){var t=Array.apply(null,{length:e.length}).map(Number.call,Number),i=Array.apply(null,{length:e.length}).map(Number.call,Number);return{shuffled:t=t.map((function(e,t){var n=Math.floor(Math.random()*i.length);return i.splice(n,1)[0]}))}},o.onInput=function(e,t){var i=this.props.id,n=this.props.choices[this.props.randomize?this.state.shuffled[e]:e];if(n.view&&n.view.props&&n.view.props.onInput)n.view.props.onInput(n.props.id||i,n.view.props,this.props.viewProps,this.props.mergeInput);else if(n.props&&n.props.onInput)n.props.onInput(n.props.id||i,n.props,this.props.viewProps,this.props.mergeInput);else if(n.props&&n.props.out)this.props.mergeInput(i,n.props.out);else if(this.props.onInput)this.props.out?this.props.onInput(i,this.props,this.props.viewProps,this.props.mergeInput):n.view?this.props.onInput(i,n.view.props,this.props.viewProps,this.props.mergeInput):this.props.onInput(i,n.props,this.props.viewProps,this.props.mergeInput);else if(this.props.out)this.props.mergeInput(i,this.props);else{var r=this.props.choices[this.props.randomize?this.state.shuffled[e]:e];r.view?this.props.mergeInput(i,r.view.props):this.props.mergeInput(i,r.props)}},o.getId=function(e){return"ch-"+e},o.getName=function(e){return e.name?e.name:this.props.id},o.getIndex=function(e){return e.split("-")[1]},o.renderButton=function(e,t){if(e)return r.a.createElement(a.a,{bgColor:"gChoice",id:t,key:t,onInput:this.onInput},e)},o.renderChoices=function(){var e=this;return this.props.randomize?this.state.shuffled.map((function(t,i){return e.renderButton(e.props.choices[t],i)})):this.props.choices.map((function(t,i){return e.renderButton(t,i)}))},o.render=function(){return r.a.createElement(u,{key:this.props.id,id:this.props.id,className:(this.props.className?this.props.className:"")+" mcq-choice item-end choices maxWidth-large item-large",fullWidth:this.props.fullWidth,compact:this.props.compact},this.props.text&&r.a.createElement(s.a,{tag:"p",fontSize:this.props.fontSize,center:!0,key:this.props.id,className:"question fadeIn",color:"text"},this.props.text),this.renderChoices())},n}(r.a.PureComponent),u=o.b.div.withConfig({displayName:"Choices__Container",componentId:"sc-10betv7-0"})(["margin:auto;text-align:center;.solo,.multi{box-sizing:border-box;margin:10px;}"])},dqgC:function(e,t,i){}}]);
//# sourceMappingURL=1c377de9871869784a9a644e97cd16155818224d-1c2c229762f8f17f5159.js.map