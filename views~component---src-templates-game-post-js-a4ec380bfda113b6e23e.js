(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"4jJY":function(e,t,a){},EZnP:function(e,t,a){"use strict";a("E5k/");var n=a("q1tI"),i=a.n(n),r=a("ZMKu"),o=a("Laee"),s=(a("OQUD"),function(e){var t=e.view||e;return e.animation?function(e,t){var a="";return e.props&&e.props.className&&(a+=" "+e.props.className),i.a.createElement(r.b.div,Object.assign({id:e.props.id,key:e.props.id},t,{className:a})," ",e," ")}(t,e.animation?o.e[e.animation]:ANIMATION):e});t.a=function(e){var t=e;return Array.isArray(t)?t=t.filter((function(e){return e})).map((function(e){return s(e)})):t&&(t=s(t)),t}},N5C4:function(e,t,a){"use strict";a("E5k/");var n=a("q1tI"),i=a.n(n),r=(a("OQUD"),{position:"absolute",left:"50%",top:"200px",transform:"translate(-50%, -50%)"});t.a=function(e){return i.a.createElement("div",Object.assign({id:e.id,key:e.id},e,{style:r}),e.children)}},NHW9:function(e,t,a){"use strict";a("E5k/"),a("bUlp");var n=a("q1tI"),i=a.n(n),r=a("vOnD"),o=a("ZMKu"),s=a("Laee");a("OQUD");t.a=function(e){return i.a.createElement(c,Object.assign({key:e.id,id:e.id,color:e.color,minHeight:e.minHeight},s.a,{className:(e.className?e.className:"")+" "+(e.fullscreen?"fullscreen":""),fontsize:e.fontsize,layoutRelative:e.layoutRelative,scrollable:e.scrollable,fullscreen:e.fullscreen,padding:e.padding}),i.a.createElement(o.a,null,e.children))};var c=Object(r.b)(o.b.div).withConfig({displayName:"FlexContainer__Container",componentId:"sc-13fdt8y-0"})(["width:100%;height:100%;"," ",";"," @supports (display:flex){display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center;align-content:stretch;}"],(function(e){if(e.scrollable)return"\n                overflow-x:hidden;\n                overflow-y:auto;\n            "}),(function(e){return e.fontsize?"font-size: "+e.fontsize+"px":""}),(function(e){if(e.minHeight)return"min-height: "+e.minHeight+";"}))},PbRz:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));a("rzGZ"),a("Dq+y"),a("YbXK"),a("6kNP"),a("8npG");var n,i,r=a("OQUD"),o=((n={neutral:{x:"-1170px",y:"-388px",width:"164px",height:"378px"},annoyed:{x:"-1344px",y:"-388px",width:"152px",height:"378px"},hurt:{x:"0px",y:"0px",width:"255px",height:"378px"},helpful:{x:"-335px",y:"-30px",width:"215px",height:"378px"},tease:{x:"-605px",y:"0px",width:"196px",height:"380px"},judgy:{x:"-815px",y:"0px",width:"175px",height:"378px"},flirty:{x:"-990px",y:"0px",width:"175px",height:"378px"},listening:{x:"-1170px",y:"0px",width:"162px",height:"385px"},angry:{x:"-1340px",y:"0px",width:"145px",height:"378px"},shrug:{x:"0px",y:"-385px",width:"345px",height:"378px"},wary:{x:"-360px",y:"-418px",width:"245px",height:"340px"},nasty:{x:"-605px",y:"-390px",width:"210px",height:"380px"},phone:{x:"-815px",y:"-388px",width:"190px",height:"380px"},thinking:{x:"-1000px",y:"-388px",width:"170px",height:"380px"}}).annoyed={x:"-1335px",y:"-388px",width:"150px",height:"380px"},n),s=((i={neutral:{x:"-330px",y:"-50px",width:"190px",height:"388px"},sullen:{x:"-325px",y:"-445px",width:"204px",height:"378px"},defensive:{x:"-535px",y:"-450px",width:"175px",height:"378px"},hurt:{x:"-740px",y:"-385px",width:"235px",height:"398px"},sad:{x:"-985px",y:"-430px",width:"185px",height:"388px"},angry:{x:"-1205px",y:"-430px",width:"290px",height:"398px"},happy:{x:"-1557px",y:"-420px",width:"170px",height:"398px"},wary:{x:"0px",y:"-475px",width:"320px",height:"348px"},waking:{x:"0px",y:"0px",width:"255px",height:"438px"},shrug:{x:"0px",y:"-853px",width:"335px",height:"378px"},cry:{x:"-335px",y:"-845px",width:"235px",height:"385px"},pain:{x:"-585px",y:"-840px",width:"250px",height:"385px"},shock:{x:"-835px",y:"-840px",width:"250px",height:"385px"},talk:{x:"-1080px",y:"-840px",width:"240px",height:"385px"},thinking:{x:"-1320px",y:"-840px",width:"235px",height:"385px"},confused:{x:"-1555px",y:"-840px",width:"215px",height:"385px"}}).happy={x:"-1770px",y:"-840px",width:"190px",height:"385px"},i),c=function(e){return new Promise((function(t,n){var i={};Promise.all(e.map((function(e){return function(e){switch(e){case"joshua":return a.e(66).then(a.t.bind(null,"UZ3O",7));case"neku":return a.e(68).then(a.t.bind(null,"46mo",7));case"goddess":case"rainbow":return a.e(65).then(a.t.bind(null,"3Y8t",7));case"sweet":return a.e(69).then(a.t.bind(null,"pUGW",7));case"ari":return a.e(64).then(a.t.bind(null,"CGYT",7));case"kara":default:return a.e(67).then(a.t.bind(null,"CqCb",7))}}(e)}))).then((function(a){a.map((function(t,a){i[e[a]]=t.default})),t(i)})).catch((function(e){Object(r.f)("game-post remapImages error",e),n({error:e})}))}))};t.a={joshua:o,neku:s,goddess:{shy:{x:"-26px",y:"0px",width:"220px",height:"485px"},neutral:{x:"-713px",y:"0px",width:"220px",height:"485px"},shocked:{x:"-484px",y:"0px",width:"220px",height:"485px"},doubt:{x:"-255px",y:"0px",width:"220px",height:"485px"}},kara:{neutral:{x:"0px",y:"0px",width:"335px",height:"485px"},annoyed:{x:"-335px",y:"0px",width:"335px",height:"485px"},angry:{x:"-675px",y:"0px",width:"330px",height:"485px"},shocked:{x:"-1010px",y:"0px",width:"330px",height:"485px"}},sweet:{sad:{x:"3px",y:"0px",width:"175px",height:"430px"},happy:{x:"-170px",y:"0px",width:"175px",height:"430px"},neutral:{x:"-345px",y:"0px",width:"175px",height:"430px"}},ari:{sad:{x:"-305px",y:"0px",width:"308px",height:"470px"},shocked:{x:"-606px",y:"0px",width:"308px",height:"470px"},neutral:{x:"-0px",y:"0px",width:"308px",height:"470px"}},triangles:{0:{x:"0px",y:"0px",width:"280px",height:"445px"},1:{x:"280px",y:"0px",width:"280px",height:"445px"}}}},Uhge:function(e,t,a){"use strict";a("E5k/");var n=a("q1tI"),i=a.n(n),r=(a("ZMKu"),a("vOnD")),o=a("PbRz"),s=a("iZBq"),c=a("OQUD"),l=a("Hhtr");t.a=function(e){Object(c.f)("SpriteView props",e);var t=function(){return o.a[e.imageId]&&o.a[e.imageId][e.pose]?o.a[e.imageId][e.pose]:{width:e.width||e.src[e.imageId].width+"px",height:e.height||e.src[e.imageId].height+"px",x:"50%",y:"50%"}};return Object(c.f)("SpriteView pose "+e.pose+" imageId "+e.imageId+" pose",e),i.a.createElement(s.a,{key:e.id+"-staged",id:e.id+"-staged",width:t().width,height:t().height,bottom:e.bottom,initial:e.initial||"initial",animate:e.animate||"animate",exit:e.exit||"exit"},i.a.createElement(u,Object.assign({key:"img-"+e.id,id:"img-"+e.id,src:e.src[e.imageId]},t(),{noScale:e.noScale,scaleDown:Object(l.a)()})))};var u=r.b.div.withConfig({displayName:"simple__Sprite",componentId:"k0iw2l-0"})(["margin:auto;",";",";"," @media(min-width:","){","}@media(min-width:","){transform-origin:100% 100%;transform:scale(1);}"," background:url(",")  no-repeat "," ",";"],(function(e){if(e.width)return"width: "+e.width}),(function(e){if(e.height)return"height: "+e.height}),(function(e){if(!e.noScale)return"transform-origin: 150% 100%;\n            transform: scale(0.6);"}),(function(e){return e.theme.mediaS}),(function(e){if(!e.noScale)return"transform-origin: 250% 100%;\n                transform: scale(0.8);"}),(function(e){return e.theme.mediaM}),(function(e){if(e.scaleDown)return"\n            transform-origin: 100% 100%;\n            transform: scale(0.65) !important;\n            "}),(function(e){return e.src}),(function(e){return e.x}),(function(e){return e.y}))},i25o:function(e,t,a){"use strict";a("3nLz"),a("E5k/");var n=a("q1tI"),i=a.n(n),r=a("vOnD"),o=a("Mdna"),s=a("Db+8"),c=a("ZMKu"),l=a("OQUD"),u=a("7sVn"),p=a("WvvM"),m=a.n(p),d=a("Wbzz"),h=a("qhky"),g=a("Zrqu"),f=a("+HCB"),x={opacity:1,y:"0%"},b={opacity:0,y:"200%"},y=function(e){var t=Object(n.useState)(!1),a=t[0],r=t[1];Object(n.useEffect)((function(){if(e.id&&(r(!0),e.timeout)){var t=setTimeout((function(){r(!1)}),3e3);return function(){clearTimeout(t)}}}),[e.id]);var o=function(){r(!1)};return i.a.createElement(v,{key:"toasttool",className:"z-ui",initial:b,animate:a?x:b,backgroundColor:e.backgroundColor},e.timeout&&i.a.createElement(i.a.Fragment,null,e.title&&i.a.createElement(g.a,{tag:"h4",className:"text-center"},e.title),i.a.createElement(g.a,{className:"text-center"},e.text)),!e.timeout&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{className:"close ",icon:"icon-checkmark",color:"text",onInput:o,size:"s"}),e.title&&i.a.createElement(g.a,{tag:"h4",className:"text-center"},e.title),i.a.createElement(g.a,{tag:"h5",className:"text-center"},e.text)))},v=Object(r.b)(c.b.div).withConfig({displayName:"ToastTool__Container",componentId:"sc-6v3dy1-0"})(["position:fixed;bottom:20px;left:20px;right:20px;max-width:600px;margin:auto;background-color:black;border-bottom:2px solid ",";padding:10px;.close{float:right;}z-index:",""],(function(e){return e.theme.primaryD}),(function(e){return e.theme.zUi})),w=(a("6kNP"),a("8npG"),a("mSAW")),E=function(e){return"game-"+e},O=function(e){if(window&&window.localStorage){Object(w.e)(e,!0);var t=E(e);window.localStorage.removeItem(t)}};function j(e,t){return window&&window.localStorage?e.map((function(e){var a=E(t),n=window.localStorage.getItem(a);if(!n)return null;var i=Object(w.a)(Object(w.c)(t),n);return JSON.parse(i)})):null}var S=a("3vKF"),k=a("kjjs"),I=(a("4jJY"),a("pJf4"),function(e){var t,a=e.date,n=e.name,i=e.headline,r=e.description,o=e.keywords,s=e.url,c=e.logo,l=e.logoWidth,u=e.logoHeight;if(a||(t="date"),i||(t="headline"),o||(t="keywords"),s||(t="url"),n||(t="name"),r||(t="description"),c||(t="logo"),l||(t="logoWidth"),u||(t="logoHeight"),t)throw Error("structured data blog-post missing "+t);return JSON.stringify({"@context":"http://schema.org/","@type":"VideoGame",gamePlatform:"web browser",operatingSystem:"web browser",playMode:"single-player",dateCreated:a,genre:"puzzle",headline:i,keywords:o,url:s,name:n,description:r,applicationCategory:"game",director:{"@type":"Person",brand:{"@type":"Organization",email:"stims.ms@gmail.com",description:"Makes experimental text-based math games. They are open ended and data rich puzzle problems.",image:{"@type":"ImageObject",url:c,width:l,height:u}}}})}),C=a("55FY"),N=a("LJHC"),M="Code Libraries",_=[{text:"Nerdamer, which handles math operations",href:"https://github.com/jiggzson/nerdamer"},{text:"Katex, which handles displaying math equations",href:"https://github.com/KaTeX/KaTeX"},{text:"ReCharts, which graphs game simulation data",href:"https://github.com/jiggzson/nerdamer"},{text:"Firebase, which handles exam related features",href:"https://github.com/jiggzson/nerdamer"},{text:"Gatsby, which builds the website efficiently",href:"https://github.com/jiggzson/nerdamer"},{text:"React, which makes designing the website a pleasure",href:"https://github.com/jiggzson/nerdamer"}],P=function(e){var t=function(e,t){if(e&&t){var a=[i.a.createElement(g.a,{key:e+"-heading",tag:"h4",className:"block",color:"secondary"},e)];return a.push(i.a.createElement("ul",{key:e+"-list",style:{color:"pink"}},t.map((function(e,t){return e.href&&e.text?i.a.createElement("li",{key:t},i.a.createElement(g.a,{tag:"a",href:e.href,leave:!0,color:"text",className:"block text-left",target:"_blank"},e.text)):e.text?i.a.createElement("li",{key:t},i.a.createElement(g.a,{tag:"p",color:"text",className:"block text-left"},e.text)):void 0})))),a}};return i.a.createElement(N.a,{className:"text-center"},i.a.createElement(g.a,{tag:"h2",className:"text-underline",margin:"0px 0px 20px 0px"},"Credits"),t(M,_),e.credits&&e.credits.map((function(e){return t(e.heading,e.items)})))},z=a("KZAx"),D=a("bdr6"),T=a("o0o1"),G=a.n(T);a("ls82");function U(e,t,a,n,i,r,o){try{var s=e[r](o),c=s.value}catch(l){return void a(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function L(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function o(e){U(r,n,i,o,s,"next",e)}function s(e){U(r,n,i,o,s,"throw",e)}o(void 0)}))}}var A=["A"],R=function(e){var t=Object(n.useState)(null),a=(t[0],t[1]),r=Object(n.useState)(A),o=r[0],s=r[1],c=Object(n.useState)(!1),p=c[0],d=c[1];Object(n.useEffect)((function(){h()}),[e.gameState]);var h=function(){var t=L(G.a.mark((function t(){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p||(d(!0),a=j(A,e.title),s(a),d(!1));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=L(G.a.mark((function t(n,i,r){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showModal(!1),Object(l.i)(new u.Event(m.a.acMenu,"delete",n+"",null)),t.next=4,O(e.title);case 4:return t.next=6,a(null);case 6:h(),e.onToast("Save file deleted");case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),x=function(t,a,n){e.onPlay(function(e){if(!e)throw Error("tried to start game session with no title "+e);var t,a,n,i=null;return window&&window.localStorage&&(a=E(e),n=Object(w.e)(e,!0),(i=window.localStorage.getItem(a))?(t=window.localStorage.getItem(n),t=JSON.parse(t),i=Object(w.a)(Object(w.c)(e),i),i=JSON.parse(i)):(t={title:n,startDate:Date.now(),duration:0},i=null),t.sessionStart=Date.now(),window.localStorage.setItem(n,JSON.stringify(t))),i}(e.title))};return i.a.createElement("div",null,o.map((function(t,a){return console.log("rendering save file "+a,t),i.a.createElement(X,{key:a,hover:!0},i.a.createElement(F,null,i.a.createElement(f.a,{key:"play",className:"new play",icon:"icon-play3",color:"primary",out:a,iconSize:"3.5",glowBtn:!0,hover:!0,hoverScale:!0,onInput:x}),i.a.createElement(f.a,{key:"delete",className:"new play",icon:"icon-cross",color:"red",out:a,iconSize:"remM",disabled:!t,glowBtn:!0,bgColor:"transparent",hover:!0,hoverScale:!0,onInput:function(t){e.showModal(H(t,g))}})))})))},H=function(e,t){return i.a.createElement(q,null,i.a.createElement(g.a,{tag:"p",color:"secondary"},"Are you sure you want to delete save file ",e,"?"),i.a.createElement("div",null,i.a.createElement(o.a,{id:e,width:"40%",margin:"3%",glow:!0,onInput:function(){t(e)}},"yes")))},q=r.b.section.withConfig({displayName:"local__DeleteView",componentId:"sc-9j4vs0-0"})([".text{text-align:center;}"]),F=r.b.div.withConfig({displayName:"local__ButtonWrapper",componentId:"sc-9j4vs0-1"})(["width:180px;border-radius:5px;border:5px dashed ",";padding:10px;display:inline-block;display:flex;justify-content:center;align-items:center;margin:auto;background-color:rgba(0,0,0,0.9);"],(function(e){return e.theme.secondary})),X=r.b.div.withConfig({displayName:"local__SaveFile",componentId:"sc-9j4vs0-2"})(["position:relative;max-width:",";margin:auto;display:block;padding:5px 0px;.save-title{margin-left:50px;line-height:50px;}@media (min-width:","){padding:20px 0px;.save-title{font-size:1.5em;}}.toRight{right:10px;}.center-save{position:absolute;top:43%;transform:translateY(-50%);}.play-button-wrapper{margin:10px;}.delete{float:right;}"],(function(e){return e.theme.mediaM}),(function(e){return e.theme.mediaS})),W=(a("rzGZ"),a("Dq+y"),a("Ggvi"),a("CF71")),B=function(e){var t=function(t){"carn"===t?e.onMove(e.index+1>=e.total?0:e.index+1):e.onMove(e.index<=0?e.total-1:e.index-1)};return i.a.createElement(K,null,i.a.createElement("div",{className:"markers"},i.a.createElement(f.a,{id:"carp",icon:"icon-circle-down",rotate:"90",className:"carousel-prev",onInput:t}),function(){for(var t=[],a=0;a<e.total;a++)t.push(i.a.createElement("div",{key:e.itemIds[a],className:"marker "+(a===e.index?"active":"")}));return t}(),i.a.createElement(f.a,{id:"carn",icon:"icon-circle-down",rotate:"270",className:"carousel-next",onInput:t})),e.children)},K=r.b.div.withConfig({displayName:"Carousel__Container",componentId:"sc-1yrvifm-0"})(["position:relative;.carousel-prev{position:absolute;left:-50px;top:0px;}.carousel-next{position:absolute;right:-50px;top:0px;}.markers{text-align:center;min-height:50px;display:inline-block;position:relative;}.marker{margin:15px 10px;width:20px;height:20px;display:inline-block;background-color:",";opacity:0.5;transition:opacity 0.3s ease;&.active{opacity:1;}}"],(function(e){return e.theme.primary})),J=a("aetF"),Y=a("Xjse"),Z=(a("4tu4"),function(e){var t=Object(n.useState)(null),a=t[0],r=t[1],s=Object(n.useState)(0),c=s[0],l=s[1],u=Object(n.useState)({}),p=u[0],m=u[1],d=Object(n.useState)(!1),h=d[0],f=d[1],x=Object(n.useState)(null),b=x[0],y=x[1];Object(n.useEffect)((function(){e.isSignedIn&&e.user&&e.doSubscribe("examGetPlayer",(function(){return Object(S.d)(e.user.uid)}),(function(t){var a=e.meta.import,n={};for(var i in t.exams)t.exams[i].game===a&&(n[i]=t.exams[i]);r(Object.assign({},t,{exams:n}))}),S.b,y)}),[e.user,e.isSignedIn]);var v=function(){f(!1),y("failed to load exam")},w=function(t){f(!0),e.doSubscribe("examLoadExam",(function(){return Object(Y.i)(t)}),(function(a){if(f(!1),a&&a.data)e.onPlay(a.data,t);else if(a&&a.report){var n;m(Object.assign({},p,((n={})[t]=a.report,n)))}else y("failed to load exam")}),Y.c,v)},E=function(t){if(t&&e.user.uid){e.showModal(!1);var n=Object.assign({},a.exams);delete n[t];var i=Object.assign({},a,{exams:n});r(i),p[t]&&(n=delete(n=Object.assign({},p))[t],m(n)),e.doSubscribe("examDeleteExam",(function(){return Object(S.a)(e.user.uid,t)}),Object(S.c)((function(a){e.onToast("Exam "+t+" deleted")})),S.b,y)}else y("cannot delete exam without the user id and the exam id")},O=function(e){l(e)},j=function(t){return i.a.createElement("div",null,i.a.createElement(J.a,{game:e.meta,data:t}))};return i.a.createElement(te,null,i.a.createElement("div",{className:"newExam"},i.a.createElement(Q,{text:"Start New Exam",onInput:function(){e.onPlay(null,!0)}})),i.a.createElement("div",{className:"exams"},"  ",function(){if(a){if(a.exams){var t=Object.keys(a.exams)[c],n=a.exams[t],r=p[t];if(n){var s=!n.hasOwnProperty("finalScore");return function(e){if(a&&a.exams){var t=Object.keys(a.exams);if(t.length>0)return i.a.createElement(B,{index:c,total:t.length,onMove:O,itemIds:t},e)}return e}(i.a.createElement("div",{style:{position:"relative"}},function(e,t){return i.a.createElement("div",null,i.a.createElement(g.a,{color:"secondary",text:"Started on: "+new Date(t.date).toLocaleString()}),i.a.createElement(g.a,{color:"secondary",fontSize:"remM",className:"text-center",text:t.finalScore?"Score: "+t.finalScore:"in progress"}))}(0,n),h&&i.a.createElement(W.a,{text:"retrieving full report"}),!h&&r&&j(r),!h&&!r&&i.a.createElement(o.a,{id:t,onInput:w,compact:!0,glow:!0},s?"resume exam":"view report"),!h&&!r&&i.a.createElement(o.a,{id:t,onInput:function(){e.showModal(V(t,E))},compact:!0},"delete exam")))}}return i.a.createElement("div",null,i.a.createElement("p",{style:{color:"cyan"}},"No exams found"))}return b?i.a.createElement(g.a,{text:b,color:"error"}):i.a.createElement(W.a,{text:"retrieving user"})}()," "))}),V=function(e,t){return i.a.createElement("div",null,i.a.createElement(g.a,{text:"Delete Exam?"}),i.a.createElement("div",null,i.a.createElement(o.a,{id:e,compact:!0,onInput:t},"okay")))},Q=function(e){return i.a.createElement(f.a,{key:"play",className:"new play",icon:"icon-play3",color:"text",text:e.text,padding:"20px",iconSize:"remL",glowBtn:!0,bgColor:"primaryD",hover:!0,onInput:e.onInput})},$=function(e){return Object(n.useEffect)((function(){!e.isSignedIn&&e.doSignIn&&e.doSignIn()}),[e.doSignIn]),console.log("SignIn exam toggle props",e),i.a.createElement(ee,null,e.isSignedIn&&i.a.createElement(Z,Object.assign({},e,{onPlay:e.onPlay,meta:e.meta})),!e.isSignedIn&&i.a.createElement(Q,{text:"Play in Exam Mode",onInput:e.doSignIn}))},ee=r.b.div.withConfig({displayName:"exam__Wrapper",componentId:"sc-12engqb-0"})([""]),te=r.b.div.withConfig({displayName:"exam__Container",componentId:"sc-12engqb-1"})(["position:relative;text-align:center;margin:auto;padding-top:20px;.exams{min-height:100px;max-height:400px;}.newExam{min-height:100px;}"]),ae=a("Hhtr"),ne=a("hyCQ"),ie=a("Laee"),re=(a("i8i4"),"6LeWWOQUAAAAANyPlsEzIwbJnqqXc70y6GKGSHJa"),oe=Object(s.a)((function(e){var t=Object(n.useState)(null),a=t[0],r=t[1];Object(n.useEffect)((function(){o()}),[]);var o=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.google.com/recaptcha/api.js?render="+re,t.onload=function(e){grecaptcha.ready((function(){s()}))},t.onerror=function(t){e.acceptOffline?(Object(l.i)(Object(u.Event)("captcha","validateSuccess","offline",null,!0)),e.onVerify(!0)):Object(l.h)("captcha error loading script",!1)},document.body.appendChild(t)},s=function(){grecaptcha&&e.doSubscribe("recaptcha",(function(){return grecaptcha.execute(re,{action:e.id?e.id:"verify"})}),(function(t){!function(t){e.doSubscribe("checkRepcaptchaWithServer",(function(){return Object(Y.l)(t)}),(function(t){t.success?(Object(l.i)(new u.Event("captcha","validateSuccess",t.score,null,!0)),e.onVerify(t.score>=e.minScore)):(Object(l.i)(Object(u.Event)("captcha","validateFail")),e.onVerify(!1))}),Y.c,r)}(t)}),Y.c,r)};return a?i.a.createElement("div",null,i.a.createElement("p",{style:{color:"red"}},"reCaptcha error: ",a)):null})),se=function(e){},ce=Object(s.a)((function(e){var t=Object(n.useState)(!1),a=t[0],r=t[1];Object(n.useEffect)((function(){window.onloadCallback=se,window.recaptchaCallback=o,window.recaptchaErrorCallback=se,window.recaptchaExpiredCallback=se}));var o=function(t){e.doSubscribe("checkRepcaptchaWithServer",(function(){return Object(Y.l)(t,!0)}),(function(t){t.success?(Object(l.i)(Object(u.Event)("captcha","validateSuccess","challenge",null,!0)),e.onVerify(t.success)):(Object(l.i)(Object(u.Event)("captcha","validateFail","challenge",null)),e.onVerify(!1))}),Y.c,r)};return i.a.createElement("div",null,i.a.createElement(h.a,null,i.a.createElement("script",{src:"https://www.google.com/recaptcha/api.js?",async:!0,defer:!0})),a&&i.a.createElement(g.a,{className:"text-center"},a),i.a.createElement("form",{method:"POST",style:le},i.a.createElement("div",{style:{margin:"auto",textAlign:"center"},class:"g-recaptcha","data-sitekey":"6LeKbeQUAAAAAKcAIRSglAlCF8rzRcSesfO_1lR7","data-callback":"recaptchaCallback","data-error-callback":"recaptchaErrorCallback","data-expired-callback":"recaptchaExpiredCallback"})))})),le={margin:"auto",textAlign:"center",display:"inline-block"},ue=function(e){var t=Object(n.useState)(null),a=t[0],r=t[1],o=Object(n.useState)(!1),s=o[0],c=o[1];return i.a.createElement(pe,null,i.a.createElement(oe,{id:e.id,minScore:e.hasOwnProperty("minScore")?e.minScore:.5,acceptOffline:e.acceptOffline,onVerify:function(e){e?r(e):c(!0)}}),s&&i.a.createElement(ce,{onVerify:function(e){r(e),c(!1)},acceptOffline:e.acceptOffline}),null===a&&i.a.createElement(W.a,{delay:0,text:"Verifying your request"}),!0===a&&e.children,!1===a&&i.a.createElement(me,null,"Unusual behaviour has been detected from your browser, try playing again later."))},pe=r.b.div.withConfig({displayName:"Captcha__Container",componentId:"p3cz1x-0"})(["position:relative;height:100%;width:100%;"]),me=r.b.p.withConfig({displayName:"Captcha__Message",componentId:"p3cz1x-1"})(["text-align:center;color:",";"],(function(e){return e.theme.primary})),de=function(e){var t=Object(n.useState)(!(!Object(k.getUrlHash)()&&!e.isSignedIn)),a=t[0],r=t[1],o=function(t,a){e.onPlay(e.component,t,a)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,null,!a&&i.a.createElement(c.b.div,Object.assign({key:"local"},ie.a),Object(ae.a)()&&i.a.createElement(R,Object.assign({},e,{onPlay:o})),!Object(ae.a)()&&i.a.createElement(ue,{id:"local",minScore:0,acceptOffline:!0},i.a.createElement(R,Object.assign({},e,{onPlay:o})))),a&&i.a.createElement(c.b.div,Object.assign({key:"exam"},ie.a),Object(ae.a)()&&i.a.createElement($,Object.assign({},e,{onPlay:o,meta:e.meta})),!Object(ae.a)()&&i.a.createElement(ue,{id:"exam",minScore:.5},i.a.createElement($,Object.assign({},e,{onPlay:o,meta:e.meta}))))),Object(ae.a)()&&i.a.createElement("div",{className:"text-center"},i.a.createElement("div",{className:"text-center"},i.a.createElement(g.a,{tag:"p",color:"secondary",className:"inline-block bg-text"},a?"Play in Exam Mode (requires internet access)":"Play Game")),i.a.createElement(ne.a,{id:"exam-mode-switch",active:a,onInput:function(e,t){r(t)}})))},he=a("YYnN"),ge=function(e){var t=function(e){return encodeURIComponent(e)};return i.a.createElement(fe,{className:e.className?e.className:""},i.a.createElement("div",null,i.a.createElement("a",{href:"https://www.reddit.com/submit?url="+t(e.url)+"\n        &title="+t(e.message),target:"_blank"},i.a.createElement(f.a,{icon:"icon-reddit",color:"#C6C6C6",hover:"white"})),i.a.createElement("a",{href:"https://twitter.com/intent/tweet?url="+t(e.url)+"&text="+t(e.message),target:"_blank"},i.a.createElement(f.a,{icon:"icon-twitter",color:"#00aced",hover:"white"})),i.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u="+t(e.url),target:"_blank"},i.a.createElement(f.a,{icon:"icon-facebook2",color:"#3b5998",hover:"white"})),function(){if(e.classShare)return i.a.createElement(he.a,{title:e.classShare.title||e.title,description:e.classShare.description||e.message})}()))},fe=r.b.div.withConfig({displayName:"Social__Container",componentId:"sc-1lm5atq-0"})(["text-align:center;#class-share{padding-left:50px !important;position:relative !important;iframe{width:34px !important;height:35px !important;position:relative !important;left:-37px !important;top:5px !important;}}"]),xe=a("D8zO"),be=a("Wqac"),ye=a("Uhge"),ve=a("iZBq"),we=a("bdSH"),Ee=function(e){var t=Object(n.useState)(null),a=t[0],r=t[1],o=Object(n.useState)(e.scene.map((function(e){return e.text&&(e.text=e.text.map((function(e){return e.toLatex?Object.assign({latex:Object(we.toLatex)(e.toLatex),fontSize:"2",color:"primary"},e):{fontSize:e.fontSize||"1.5",tag:e.tag||"h2",color:e.color||"text",text:e.text}}))),e})))[0];console.log("IntroScene props",e),console.log("IntroScene text",o),Object(n.useEffect)((function(){var t=setTimeout((function(){r((a+1)%e.scene.length)}),null===a?8e3:5e3);return function(){t&&clearTimeout(t)}}),[a]);var s=function(){var e=0;return a&&(e=a),e};return i.a.createElement(Oe,null,i.a.createElement(c.a,null,function(){var t=s(),n=e.scene[t].img,r={opacity:1,left:"50%",x:"-50%",transition:{duration:1,delay:1,ease:"easeOut"}};n.key,n.pose;return i.a.createElement(ye.a,{key:n,id:n,noScale:!0,imageId:n.key,pose:n.pose,src:e.images,initial:null===a?{opacity:0,left:"50%",x:"-250%"}:Object.assign({},r,{opacity:0}),animate:r,exit:Object.assign({},r,{opacity:0})})}(),function(){var t=s(),n=e.scene[t].text,r={opacity:1,left:"50%",x:"-50%",y:"-50%",top:"70%",width:"300px",transition:{duration:1,delay:2,ease:"easeOut"}},o="text-"+t;return i.a.createElement(ve.a,{top:"50%",key:o,initial:null===a?{opacity:0,left:"50%",x:"50%",y:"-50%",top:"70%",width:"300px"}:Object.assign({},r,{opacity:0}),animate:r,exit:Object.assign({},r,{opacity:0})},i.a.createElement(z.a,{id:"intro-scene-text",className:"bg-text",text:n}))}()))},Oe=r.b.div.withConfig({displayName:"Scene__IntroSceneWrapper",componentId:"sc-1jg24v0-0"})(["width:100%;height:100%;position:absolute;top:0px;left:0px;right:0px;"]),je={transition:{ease:"easeOut",duration:1},initial:"invisible",variants:{invisible:{opacity:0},hidden:{y:"-50px",opacity:1},visible:{y:"-300px",opacity:1}}},Se={transition:{ease:"easeOut",duration:1,delay:3},initial:"invisible",variants:{invisible:{opacity:0,y:"-50px",x:"-50%"},visible:{y:"0px",opacity:1,x:"-50%"}}},ke=function(e){var t=Object(n.useState)(!1),a=t[0],r=t[1];return console.log("GameIndex props meta",e.meta),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ce,null,e.meta.intro&&i.a.createElement(Ee,{images:e.images,scene:e.meta.intro}),i.a.createElement(xe.a,{recieveSignInProps:e.onSignIn}),i.a.createElement(be.a,{minHeight:"70px",timeout:3e3},i.a.createElement(Ie,null,i.a.createElement(ge,{url:Object(k.getFullUrl)(),classShare:{title:e.meta.title,description:e.meta.snippet},message:e.meta.tweet||"Try this math game out, they're very experimental"}),i.a.createElement(d.Link,{to:Object(k.getUrl)()+"/teachers"},i.a.createElement(z.a,{text:"Teacher's Section",color:"secondary",className:"text-underline text-right"})))),i.a.createElement(be.a,{timeout:2e3},i.a.createElement(c.b.div,Object.assign({key:"play-btns",animate:"visible"},Se,{className:(a?"menu-open":"")+"\n                                        play-buttons text-center padding-vertical-auto\n                                    "}),i.a.createElement(de,Object.assign({},e,{title:e.meta.import,onPlay:e.onPlay,onGameOver:e.showReport,gameState:e.gameState,game:e.game,meta:e.meta,audio:e.meta.audio,onToast:e.onToast,showModal:e.showModal}))))),i.a.createElement(be.a,{timeout:2500},i.a.createElement(Ne,Object.assign({},je,{animate:a?"visible":"hidden"}),i.a.createElement(f.a,{className:"fold-out-trigger",icon:"icon-circle-down",rotate:a?"0":"180",onInput:function(){r(!a)}}),i.a.createElement("div",{className:"fold-out-content"},i.a.createElement(z.a,{text:"Press Page",href:Object(k.getUrl)()+"/press"}),i.a.createElement(D.a,{id:"description-"+e.meta.import,borderImg:!0,texts:e.meta.descriptions.map((function(e){return e.text})),images:e.meta.descriptions.map((function(e){return e&&e.img?e.img.childImageSharp:null}))})))))},Ie=r.b.div.withConfig({displayName:"Intro__SocialWrapper",componentId:"sc-1glr1sb-0"})(["position:absolute;top:0px;right:10px;"]),Ce=Object(r.b)(c.b.div).withConfig({displayName:"Intro__IndexWrapper",componentId:"sc-1glr1sb-1"})(["overflow:auto;max-height:100%;padding-bottom:50px;.play-buttons{z-index:",";top:20%;left:50%;position:absolute;width:90%;}"],(function(e){return e.theme.zMid})),Ne=Object(r.b)(c.b.div).withConfig({displayName:"Intro__FoldOut",componentId:"sc-1glr1sb-2"})(["position:fixed;background-color:black;left:0px;right:0px;top:100%;z-index:",";height:",";.fold-out-trigger{height:50px;}.fold-out-content{overflow:auto;max-height:250px;}"],(function(e){return e.theme.zUi}),"300px"),Me=(a("bUlp"),a("Kz6e"),a("Szez")),_e=a("6sDy"),Pe=a("21L/"),ze=a("ky2h"),De=a("RnCn");function Te(e,t,a,n,i,r,o){try{var s=e[r](o),c=s.value}catch(l){return void a(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ge(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function o(e){Te(r,n,i,o,s,"next",e)}function s(e){Te(r,n,i,o,s,"throw",e)}o(void 0)}))}}var Ue=function(e){return new Promise((function(t,a){setTimeout((function(){t(e)}),3e3)}))},Le=function(e,t,a,n){var i=Object(Me.e)(t.game,e.inputs);return t.game=i,t.answers=Object(Me.e)(t.answers||{},e.mcq),a(e,t,n,u,Pe,k,we,_e,ze,De)},Ae={initialize:function(){var e=Ge(G.a.mark((function e(t,a,n,i){var r,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return e.next=3,Object(Y.e)(a,n);case 3:return(o=e.sent).playTime=[Date.now()],e.abrupt("return",o);case 8:return(r=t.sim.simInit(n,u,Pe,k,we,_e,ze,De)).game.changes=[],r.playTime=[Date.now()],r.game.meta.measurements&&r.game.meta.measurements.map((function(e){Object(l.i)(e)})),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,i){return e.apply(this,arguments)}}(),simulate:function(e,t,a,n,i){var r=Object(Me.c)(e.game);return new Promise((function(o,s){var c=null;if(e.examId){var l=Object(Y.k)(e.examId,n,a,r);o(l)}else c=Object.assign({},Le(r,e,t,i)),setTimeout((function(){o(c)}),3e3)}))},onEndGame:function(){var e=Ge(G.a.mark((function e(t,a,n){var i,r,o,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(l.f)("MyExamMode Tree onEndGame state.examId "+a.examId+" state",a),!a.examId){e.next=10;break}return(r=Object(Me.c)(a.game)).values=a.game.values,e.next=6,Object(Y.h)(a.examId,n,r);case 6:i=e.sent,Object(l.f)("MyTree Gate onEndGame server returned report",i),e.next=15;break;case 10:return i=Object(_e.gradeAnswers)(a),Object(_e.measureScores)(i),e.next=14,Ue(i);case 14:i=e.sent;case 15:for(s in Object(l.f)("Gate onEndGame returning state",a),a.playTime.push(Date.now()),i.playTime=a.playTime,Object(l.f)("Gate onEndGame returning report",i),o=a.game.flags)Object(l.i)(u.Event("flag",s,null,o[s]));return e.abrupt("return",i);case 22:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},Re=a("EZnP"),He=a("Pvvy"),qe=a("NHW9"),Fe=(a("YbXK"),function(e){switch(e){case"good-work-neku":return a.e(79).then(a.t.bind(null,"lksD",7));case"tatakai":return a.e(82).then(a.t.bind(null,"ctaR",7));case"observe-the-star":return a.e(80).then(a.t.bind(null,"TZ4z",7));case"f1-annoyed":return a.e(70).then(a.t.bind(null,"W4I9",7));case"f1-gasp":return a.e(71).then(a.t.bind(null,"LKQP",7));case"f1-laugh":return a.e(74).then(a.t.bind(null,"gtUh",7));case"f1-grumble":return a.e(72).then(a.t.bind(null,"q5HG",7));case"f1-sigh":return a.e(76).then(a.t.bind(null,"qYte",7));case"f1-okay":return a.e(75).then(a.t.bind(null,"2x3T",7));case"f1-what":return a.e(77).then(a.t.bind(null,"2G7g",7));case"f1-why":return a.e(78).then(a.t.bind(null,"g8cR",7));case"f1-how":return a.e(73).then(a.t.bind(null,"9zHX",7));case"strangeShop":return a.e(81).then(a.t.bind(null,"KlsH",7))}}),Xe={},We=function(e){return function(t){var a=Object(n.useState)({}),r=a[0],o=a[1],s=Object(n.useState)(null),c=s[0],u=s[1];Object(n.useEffect)((function(){var e;t.audio&&(e=t.audio,Promise.all(e.map((function(e){return Fe(e)})))).then((function(e){var a={};e.map((function(e,n){a[t.audio[n]]=new Audio(e.default)})),o(a)})).catch((function(e){Object(l.f)("Audio import failed ",e)}))}),[]),Object(n.useEffect)((function(){return function(){for(var e in r)p(r[e])}}),[r]);var p=function(e){e.pause(),e.remove()};Object(n.useEffect)((function(){for(var e in r)r[e].volume=t.settings.sound}),[t.settings.sound]),Object(n.useEffect)((function(){c&&(Array.isArray(c)?c:[c]).map((function(e){m(e,r)}));var e=Object.keys(Xe);e.length>0&&e.map((function(e){m(Xe[e],r)}))}),[c,r]);var m=function(e,a){var n,i;r[e.id]&&e.stop?(n=r[e.id],p(n)):r[e.id]?(n=r[e.id],e.loop&&(n.loop=e.loop),n.autoplay=!0,n.volume=(i=e.volume,t.settings&&t.settings.hasOwnProperty("sound")?(i||.5)*t.settings.sound:i||.5),n.play(),Xe[e.id]&&delete Xe[e.id]):Xe[e.id]=e};return i.a.createElement(e,Object.assign({},t,{doPlay:function(e){t.settings&&t.settings.sound>0&&setTimeout((function(){u(e)}),10)}}))}},Be=a("uM7l"),Ke=a.n(Be),Je=a("FXkq"),Ye={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},Ze={width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px"},Ve=We(Object(r.c)(Object(s.a)((function(e){var t=Object(n.useState)({}),a=t[0],r=t[1],o=Object(n.useState)({}),s=o[0],p=o[1],m=Object(n.useState)({}),d=m[0],h=m[1],g=Object(n.useState)(null),x=g[0],b=g[1],y=Object(n.useState)("Initializing Game..."),v=y[0],w=y[1],E=Object(n.useState)([]),O=E[0],j=E[1];Object(n.useEffect)((function(){Object(l.f)("Tree gameState initialize",e),e.gameState?e.gameState.game.sentHash!==e.gameState.game.recievedHash?(e.gameState.playTime.push(Date.now()),N(e.gameState.inputs||{},e.gameState,e.game,e.meta,e.settings,e.doSubscribe,M),w(!1)):(e.gameState.playTime.push(Date.now()),k(e.gameState,M),w(!1)):e.doSubscribe("treeInit",(function(){return Ae.initialize(e.game,e.meta.import,e.settings,e.examMode)}),(function(e){e.time=Date.now(),k(e,M),w(!1)}),Y.c,C)}),[P,M,e.meta,e.examMode]),Object(n.useEffect)((function(){return e.setMenuItem({settings:i.a.createElement(f.a,{icon:"icon-cog",size:"iconMem",height:"100%",color:"text",onInput:e.showSettings})}),function(){e.setMenuItem({quest:null,save:null,settings:null})}}),[]);var S=function(t,a,n){return function(i){if(i&&(i.preventDefault(),i.returnValue=""),s&&t.game&&t.game.meta&&!t.game.meta.gameover){var r=Object.assign({},t);r.settings=e.settings,r.hash=He.a.getHash(),r.inputs=a,!1!==e.onSave(r,n)&&e.showUI("toasttool",{text:"Your progress has been saved",timeout:3e3})}}};Object(n.useEffect)((function(){var e=S(a,d,!0);return window.addEventListener("beforeunload",e),function(){S(a,d,!1)(),window.removeEventListener("beforeunload",e)}}),[a,e.settings,d]);var k=function(t,a){try{var n=t.game.move.location,i=function(t,a){var n=e.game.trees[t];if(!n)throw Error("unable to find a node with the location "+t);return n(a.game,a.settings||e.settings,P)}(n||e.game.start,t);I(t,i,a)}catch(r){C(r.message,r.stack)}},I=function(t,a,n){Object(l.i)(new u.Event(e.game.k.acLoc,a.node,a.label,null,null));var i={temp:{}};h(i),r(t),p(a),_(a.view,i,n)},C=function(t,a){Object(l.h)("onTreeError "+t),Object(l.f)("onTreeError message "+t+" stack",a,"warn"),e.onError("There was an error loading the game")},N=function(t,a,n,i,r,o,c){var u=a.game;if((!t.move||t.move&&!t.move.skipChange)&&(u=Object(Me.f)(u,t),a.game=u,t.move&&(t.move.skipChange=!1)),a.game.meta.gameover)a.game.sentHash=Math.random(),e.doSubscribe("treeEndGame",(function(){return Ae.onEndGame(t,a,e.meta.import)}),(function(t){a.game.recievedHash=a.game.sentHash,e.onGameOver(t)}),Y.c,C);else{var p=a.game.move.location,m=p||n.start;a.game.flags=Object(Je.a)(a.game.flags,m),n.sim[m]?(a.game.sentHash="hello"===a.game.sentHash?"hi":"hello",o("treeSimulate",(function(){return Ae.simulate(Ke()(a),n.sim[m],m,i.import,r)}),(function(e){a.game.recievedHash=a.game.sentHash;var t=Object(Me.e)(a,e);k(t,c)}),Y.c,C)):a.game.recievedHash=a.game.sentHash}if(a.hasOwnProperty("time")){var d=Date.now(),h=d-a.time;a.time=d,Object(l.k)("tree-timing",s.node,null,h,null)}else a.time=Date.now();k(a,c)};Object(n.useEffect)((function(){(a&&d.move||d.meta&&d.meta.gameover)&&N(d,a,e.game,e.meta,e.settings,e.doSubscribe,M)}),[a.game,d,e.settings,P,M,e.meta]),Object(n.useEffect)((function(){if(a&&O.length>0){var t=Object(Me.d)(a.game,d,O,e.showUI,a.game.meta.simFields);j([]),h(Object.assign({},t)),t.move||_(s.view,t,M)}}),[O,d,e.showUI,a,e.settings]);var M=function(e,t){var a=t;a.hasOwnProperty("out")&&(a=a.out),Array.isArray(a)||(a=[a]),j(a)},_=function(e,t,a){b(Object(Re.a)(e(t,a)))},P=Object(n.useState)({meta:e.meta,showUI:e.showUI,doPlay:e.doPlay,images:e.images,keys:e.game.k})[0];return i.a.createElement(Qe,null,i.a.createElement(c.b.div,{id:"tree-loading",key:"tree-loading",style:Ze,variants:ie.c,animate:v?"animate":"exit",initial:"initial"},i.a.createElement("div",{style:Ye},i.a.createElement(W.a,{id:"tree-loading-view",autoActive:!0,spinner:!0,delay:300,text:v}))),i.a.createElement(c.b.div,{id:"tree-game-content",key:"tree-game-content",style:Ze,variants:ie.c,animate:v?"exit":"animate",initial:"initial"},i.a.createElement($e,null,s.node&&x&&i.a.createElement(c.a,{exitBeforeEnter:!0},i.a.createElement(qe.a,{key:s.node,id:s.node,padding:!0,scrollable:!0,fontsize:e.settings.fontsize,viewProps:P,layoutRelative:!0},x)))))})))),Qe=r.b.div.withConfig({displayName:"Tree__Container",componentId:"l1cbdi-0"})(["height:100%;display:inline-block;width:100%;margin:auto;"]),$e=r.b.div.withConfig({displayName:"Tree__Flex",componentId:"l1cbdi-1"})(["width:100%;height:100%;"]),et=function(e){if(isNaN(e))return e;var t=e;return e>=0&&e<=1&&(t=100*e),Object(k.roundTo)(t,2)},tt=function(e){var t=Object(n.useState)(!1),a=t[0],r=t[1],o=Object(n.useState)(et(e.score)),s=o[0],c=o[1];Object(n.useEffect)((function(){c(et(e.score))}),[e.score]),Object(n.useEffect)((function(){if(e.id){r(!0);var t=setTimeout((function(){r(!1)}),1500);return function(){clearTimeout(t)}}}),[e.id]);var l=function(e){return e?(100-s)/100+"":s/100+""};return i.a.createElement(ot,{className:"z-ui"},i.a.createElement(rt,{key:"feedbackui",id:"feedbackui",initial:"exit",animate:a?"enter":"exit",variants:{enter:at,exit:nt}},i.a.createElement(it,null,i.a.createElement(g.a,{fontSize:"5",color:"secondary"},s,"%")),i.a.createElement(ot,{style:{opacity:l()},className:"correct"}),i.a.createElement(ot,{style:{opacity:l(!0)},className:"incorrect"})),"}")},at={opacity:1},nt={opacity:0},it=r.b.div.withConfig({displayName:"Feedback__FeedbackScore",componentId:"sc-11t4huj-0"})(["position:absolute;bottom:10%;left:0px;right:0px;text-align:center;background-color:",";"],(function(e){return e.theme.textBg})),rt=Object(r.b)(c.b.div).withConfig({displayName:"Feedback__Overlay",componentId:"sc-11t4huj-1"})(["position:absolute;left:0px;right:0px;top:0px;bottom:0px;width:100%;height:100%;transform-origin:50% 100%;"]),ot=(r.b.div.withConfig({displayName:"Feedback__Positioned",componentId:"sc-11t4huj-2"})(["position:fixed;left:50vw;top:",";pointer-events:none;"],(function(e){return e.top})),r.b.div.withConfig({displayName:"Feedback__Container",componentId:"sc-11t4huj-3"})(["position:fixed;top:0px;left:0px;right:0px;bottom:0px;pointer-events:none;&.correct{background-image:radial-gradient(at 50% 25%,transparent 30%,rgba(3,191,0,0.2) 70%,rgba(3,191,0,1) 100%);}&.incorrect{background-image:radial-gradient(at 50% 25%,transparent 30%,rgba(255,0,0,0.2) 70%,rgba(255,0,0,1) 100%);}&.unlock{background-image:radial-gradient(at 50% 25%,transparent 30%,rgba(0,0,255,0.2) 70%,rgba(0,0,255,1) 100%);}"])),st=[{key:m.a.setDiff,active:!0,text:"difficulty",type:"category",value:1,labels:[{label:"easy - simple, automatic",value:1},{label:"normal - simple, not automatic",value:2},{label:"hard - harder, not automatic",value:4}]},{key:m.a.setSound,active:!0,type:"slider",value:.5,label:"Sound volume",inPlay:!0},{key:m.a.setFont,active:!0,type:"category",inPlay:!0,value:18,labels:[{label:"small",value:14},{label:"medium",value:18},{label:"large",value:22}],text:"Font Size"}],ct=(a("gu/5"),a("eoYm"),a("wC44"),r.b.div.withConfig({displayName:"radiocss__Wrapper",componentId:"sc-10o6h0i-0"})(["text-align:left;padding-left:30px;.radio-item{pointer-events:none;color:",";padding-left:5px;margin-right:30px;font-size:1em;}"],(function(e){return e.theme.text}))),lt=function(e){var t=Object(n.useState)(e.active||{}),a=t[0],r=t[1],o=function(t){var n=t.target.value,i=e.options[n],o=e.multi?Object.assign({},a):{};o[n]=!o[n]&&i.value,r(o);var c=s(o);e.out&&(c=e.out(e.id,o)),e.onInput(e.id,c)},s=function(e){var t=[];for(var a in e)e[a]&&t.push(e[a]);return 1===t.length?t[0]:t},c=function(t){!function(t,a){e.multi?e.id:e.id}(e.id,t.value);return Array.isArray(e.active)?e.active.includes(t.value):e.active===t.value};return i.a.createElement("div",{className:""+(e.className||"")},e.text&&i.a.createElement("div",null,i.a.createElement(g.a,{tag:"h4"},e.text)),e.options.map((function(t,a){return i.a.createElement(ct,{key:a,className:"radio-container"},i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",value:a,name:e.id,checked:c(t),onChange:o}),i.a.createElement("span",{className:"radio-checkmark"}),i.a.createElement("p",{className:"radio-item"},t.label||t)))})))},ut=a("jIds");function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mt=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).onInput=a.onInput.bind(pt(a)),a.handleSelect=a.handleSelect.bind(pt(a)),a.onClose=a.onClose.bind(pt(a)),a.state={settings:Object.assign({},a.props.settings),id:Math.random()},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidUpdate=function(e){e.settings!==this.props.settings&&this.setState({settings:Object.assign({},this.props.settings)})},r.onInput=function(e,t){var a,n;t.hasOwnProperty("value")?this.setState({settings:Object.assign({},this.state.settings,(a={},a[e]=t.value,a))}):this.setState({settings:Object.assign({},this.state.settings,(n={},n[e]=t,n))})},r.handleSelect=function(e){var t=e.target.name,a=e.target.value;this.onInput(t,a)},r.renderSettings=function(){var e=this;return this.props.views.map((function(t,a){var n;if((e.props.hasDifficultySetting||t.key!==m.a.setDiff)&&(!e.props.isPlaying||e.props.isPlaying&&t.inPlay)&&t.active)switch(t.type){case"category":return i.a.createElement(ht,{id:t.key,key:a},i.a.createElement(lt,{id:t.key,onInput:e.onInput,options:t.labels,active:e.state.settings[t.key],text:t.text}));case"boolean":return i.a.createElement(ht,{id:t.key,key:a},i.a.createElement("p",{className:"label-text"},t.labels[e.state.settings[t.key]]),i.a.createElement(ne.a,((n={id:t.key,className:"setting",onInput:e.onInput}).id=t.key,n.active=1===e.state.settings[t.key],n.label1=t.labels[0],n.label2=t.labels[1],n)));case"slider":return i.a.createElement(ht,{id:t.key,key:a},i.a.createElement(ut.a,{id:t.key,min:0,max:1,step:.1,value:e.state.settings[t.key],text:t.label,onInput:e.onInput}));default:return i.a.createElement("div",{id:t.key,key:a},i.a.createElement("p",{style:{color:"pink"}}," Unknown type"))}}))},r.onClose=function(){this.props.onClose(this.state.settings)},r.render=function(){return i.a.createElement(C.a,{active:this.props.active},i.a.createElement(dt,{key:"settings-container",className:"modal-child"},i.a.createElement(g.a,{tag:"h2"},"Settings"),this.renderSettings(),this.props.onClose&&i.a.createElement(o.a,{id:"setting-button",key:"setting-buttom",glow:!0,onInput:this.onClose,width:"100%",margin:"10px 0px"},"close")))},n}(i.a.PureComponent),dt=r.b.div.withConfig({displayName:"Settings__Container",componentId:"u8ghdj-0"})(["max-width:",";width:100%;margin:auto;padding:40px 10px 10px 10px;hr{margin:5px 0px;}h2{text-align:center;color:",";text-transform:uppercase;}div switch{margin-top:4px;}"],(function(e){return e.theme.mediaM}),(function(e){return e.theme.text})),ht=r.b.div.withConfig({displayName:"Settings__Setting",componentId:"u8ghdj-1"})(["position:relative;padding:10px;border-bottom:2px solid ",";.label-text{margin:0px;text-align:left;color:",";}.setting{position:absolute;top:50%;right:10px;transform:translateY(-50%);color:",";}.category{display:inline-block;color:",";label{padding:0px 10px;}}"],(function(e){return e.theme.neutral}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.text})),gt=function(e){var t,a=Object(n.useState)({id:null,question:null,answer:null,correct:!1}),r=a[0],o=a[1],s=Object(n.useState)({id:null,title:null,text:null,timeout:null}),c=s[0],p=s[1],m=Object(n.useState)(!1),d=m[0],h=m[1],g=Object(n.useState)(null),f=g[0],x=g[1],b=Object(n.useState)(e.gameState?e.gameState.settings:function(e){var t={};return st.map((function(e){t[e.key]=e.value})),e&&e.map((function(e){t[e.key]=e.values[Object(k.getRandomIndex)(e.values.length)]})),t}(e.meta.gameSettings)),v=b[0],w=b[1],E=Object(n.useState)(!e.gameState),O=E[0],j=E[1],S=Object(n.useState)(0),I=S[0],C=S[1],N=Object(n.useRef)(),M=function(){return!e.gameState&&0===I};return i.a.createElement(xt,{ref:N},i.a.createElement(bt,null,!M()&&i.a.createElement(Ve,((t={settings:v,game:e.game,meta:e.meta,gameState:e.gameState,showUI:function(e,t){"feedback"===e?o(t):"toasttool"===e?p(Object.assign({id:""+Math.random()},t)):"loading"===e&&h(t)},onGameOver:e.onGameOver,onSave:function(t,a){if(!f)return e.onSave(t,a)},setMenuItem:e.setMenuItem,onError:function(e){x(e)},showSettings:function(){j(!0)},examMode:e.examMode}).onError=e.onError,t.audio=e.meta.audio,t.images=e.images,t))),i.a.createElement(tt,Object.assign({settings:e.settings},r)),i.a.createElement(y,c),d&&i.a.createElement(ft,null,i.a.createElement(W.a,null)),i.a.createElement(mt,{views:st,settings:v,active:O,onClose:function(e){C(I+1),w(e),function(e){for(var t in e)Object(l.i)(Object(u.Event)("settings",t,e[t],null,!0))}(e),j(!1)},isPlaying:!M(),hasDifficultySetting:e.meta.hasDifficultySetting,gameSettings:e.meta.gameSettings}))},ft=r.b.div.withConfig({displayName:"Layout__LoadingBlock",componentId:"sc-1ds6173-0"})(["position:fixed;top:0px;left:0px;bottom:0px;right:0px;background-color:#000000bb;"]),xt=r.b.div.withConfig({displayName:"Layout__Container",componentId:"sc-1ds6173-1"})(["padding:0;box-sizing:border-box;height:100%;"]),bt=r.b.div.withConfig({displayName:"Layout__Content",componentId:"sc-1ds6173-2"})(["position:relative;width:100%;height:100%;"]);function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var vt={initial:{opacity:0,position:"absolute",transition:{duration:0,delay:0}},animate:{opacity:1,position:"relative"},exit:{opacity:0,position:"relative"},transition:{duration:.3,delay:0}},wt=function(e){var t,a;function n(t){var a;return a=e.call(this,t)||this,console.log("Game MainPage props",t),a.state={menuOpen:!1,play:!1,form:!1,report:!1,toasttool:{id:null,title:null,text:null,timeout:null},signInProps:{},showModal:null},a.onBack=a.onBack.bind(yt(a)),a.onToast=a.onToast.bind(yt(a)),a.onPlay=a.onPlay.bind(yt(a)),a.onError=a.onError.bind(yt(a)),a.renderScene=a.renderScene.bind(yt(a)),a.getLogo=a.getLogo.bind(yt(a)),a.showReport=a.showReport.bind(yt(a)),a.showCredits=a.showCredits.bind(yt(a)),a.saveGame=a.saveGame.bind(yt(a)),a.setMenuItem=a.setMenuItem.bind(yt(a)),a.showModal=a.showModal.bind(yt(a)),a.closeModal=a.closeModal.bind(yt(a)),a.onSignIn=a.onSignIn.bind(yt(a)),a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidMount=function(){Object(l.l)(this.props.meta.analytics),Object(l.e)({}),document.referrer&&Object(l.i)(Object(u.Event)("meta","referrer",document.referrer,null,!0)),Object(l.i)(Object(u.Event)("meta","game-title",this.props.meta.import,null,!0)),this.props.meta.measurments&&this.props.meta.measurments.map((function(e){Object(l.m)(e)})),this.props.addMenuItem({title:this.props.meta.title,onBack:this.props.BUILD_GAME?null:this.onBack})},r.componentWillUnmount=function(){Object(l.b)(),Object(l.l)(null)},r.setMenuItem=function(e,t){this.props.addMenuItem({title:this.props.meta.title,onBack:this.onBack,menuItems:e})},r.onPlay=function(e,t,a){var n={gameState:t,GameComponent:e,examMode:t?t.examId:a};t?(n.settings=t.settings,n.gameState=t,Object(l.e)(Object.assign({},Object(l.c)(),{},t.analytics)),Object(l.i)(new u.Event(m.a.acMenu,"resume",null,null))):Object(l.i)(new u.Event(m.a.acMenu,"play",null,null)),n.play=!0,this.setState(n)},r.onError=function(e){Object(l.h)(e,!1),this.setState({error:e,play:!1,report:!1,form:!1})},r.onSignIn=function(e){this.setState({signInProps:e})},r.saveGame=function(e,t,a){var n=this;if(void 0===a&&(a=0),!t&&this.state.play)return!1;if(e.playTime.push(Date.now()),!e)throw new Error("Game attempted to save null gameState");var i=Object(l.c)();e.analytics=i,a<3&&this.props.doSubscribe("saveGame",this.state.signInProps&&this.state.signInProps.user&&this.state.examId?function(){return Object(S.e)(n.state.signInProps.user.uid,n.state.examId,e)}:function(){return t=e,a=n.props.meta.import,new Promise((function(e,n){var i={};if(window&&window.localStorage){var r=Object(w.e)(a,!0),o=(i=JSON.parse(window.localStorage.getItem(r))).sessionStart,s=Date.now(),c=i.duration+(s-o);i.sessionStart=s,i.duration=c;var l=new Date(c),u=l.getMinutes();u<10&&(u="0"+u);var p=l.getSeconds();p<10&&(p="0"+p),i.time=u+":"+p,i.gameover=t.game.gameover,window.localStorage.setItem(r,JSON.stringify(i));var m=E(a),d=JSON.stringify(t),h=Object(w.b)(Object(w.c)(a),d);window.localStorage.setItem(m,h)}e(i)}));var t,a},(function(e){return n.onToast("Your game was saved"),!0}),(function(t){return Object(l.f)("saveGame failed",t),n.saveGame(e,caller,a+1),"failed to saveGame, attempt "+a}),this.onError)},r.onToast=function(e){this.setState({toasttool:{id:Math.random()+"",timeout:3e3,text:e}})},r.onBack=function(){this.state.modSettings?this.setState({modSettings:!1}):this.state.play||this.state.gameover||this.state.report||this.state.error?(Object(l.i)(new u.Event(m.a.acMenu,"back",this.state.play||this.state.gameover?"game":"report",null)),this.setState({play:!1,form:!1,error:!1,report:!1,newGameSettings:!1,modSettings:!1})):(Object(l.i)(new u.Event(m.a.acMenu,"exit",null,null)),Object(d.navigate)(Object(k.getParentUrl)(Object(k.getUrl)(),1)))},r.showReport=function(e){Object(l.i)(new u.Event(m.a.acMenu,"report",null,null));e||this.state.answers;console.log("store item encrypt this.props.meta",this.props.meta),Object(w.f)(Object(J.b)(this.props.meta.import),e,Object(w.c)(this.props.meta.import)),Object(d.navigate)(Object(k.getUrl)()+"/report")},r.showCredits=function(e){Object(l.i)(new u.Event(m.a.acMenu,"credits",null,null));var t=e||this.state.answers;this.setState({credits:!0,report:!1,answers:t,form:!1})},r.showModal=function(e){this.setState({showModal:e})},r.closeModal=function(){this.setState({showModal:null})},r.renderScene=function(){var e=this;return this.state.error?i.a.createElement(c.b.div,Object.assign({id:"view-form",key:"view-form",speed:"page",className:"item-fill scroll-please"},vt),i.a.createElement(g.a,{id:"main-error",tag:"h2",fontSize:"remM",color:"red",className:"text-center"},this.state.error)):this.state.credits?i.a.createElement(c.b.div,Object.assign({id:"view-credits",key:"view-credits",speed:"page",className:"item-fill scroll-please text-center"},vt),i.a.createElement(P,{credits:this.props.meta.credits}),i.a.createElement(o.a,{onInput:function(){e.showReport(e.state.answers)},compact:!0},"Next")):this.state.report?i.a.createElement(c.b.div,Object.assign({id:"view-results",key:"view-results",speed:"page",className:"item-fill scroll-please"},vt),i.a.createElement("h1",{style:{color:"cyan"}},"Sorry your browser lacks the storage facilities necessary to display the report page")):this.state.play?i.a.createElement(c.b.div,Object.assign({id:"view-play",key:"view-play",speed:"page",className:"item-fill"},vt),i.a.createElement(gt,{onGameOver:this.showCredits,onSave:this.saveGame,game:this.props.game,meta:this.props.meta,gameState:this.state.gameState,setMenuItem:this.setMenuItem,examMode:this.state.examMode,onError:this.onError,images:this.props.images})):i.a.createElement(c.b.div,Object.assign({id:"view-menu",key:"view-menu",className:"scroll-please text-center",speed:"page"},vt),i.a.createElement(ke,Object.assign({},this.props,{onPlay:this.onPlay,showReport:this.showReport,onError:this.onError,showCredits:this.showCredits,showModal:this.showModal,closeModal:this.closeModal,gameState:this.state.gameState,images:this.props.images,onToast:this.onToast,onSignIn:this.onSignIn},this.state.signInProps)))},r.renderContent=function(){return i.a.createElement(Et,null,i.a.createElement(c.a,{exitBeforeEnter:!0},this.renderScene()))},r.renderLinks=function(){return Object(l.f)("renderLinks url "+Object(k.getUrl)()),i.a.createElement("div",null,i.a.createElement(d.Link,{to:Object(k.getUrl)()+"/report"}))},r.getLogo=function(){var e;return this.props.meta&&this.props.meta.descriptions&&this.props.meta.descriptions.map((function(t){!e&&t.img&&(e=t.img.childImageSharp.fixed.src)})),e||(e=this.props.logo),e},r.render=function(){return Object(l.f)("Main game page props",this.props),i.a.createElement("div",{style:{height:"100%",width:"100%"}},i.a.createElement(h.a,null,i.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css",async:!0,defer:!0}),i.a.createElement("script",{className:"structured-data-list",type:"application/ld+json"},I({date:this.props.meta.date,name:this.props.meta.title,description:this.props.meta.snippet,headline:this.props.meta.snippet,keywords:this.props.meta.topics.join(", "),url:Object(k.getUrl)(),logoWidth:"512",logoHeight:"512",logo:this.getLogo()}))),this.renderLinks(),this.renderContent(),i.a.createElement(y,this.state.toasttool),i.a.createElement(C.a,{active:this.state.showModal,onClose:this.closeModal},this.state.showModal))},n}(i.a.Component),Et=(t.a=Object(s.a)(wt),Object(r.b)(c.b.div).withConfig({displayName:"Main__Content",componentId:"sc-1ww2lxj-0"})(["height:100%;"]))},iZBq:function(e,t,a){"use strict";a("E5k/");var n=a("q1tI"),i=a.n(n),r=a("vOnD"),o=a("ZMKu"),s=a("OQUD"),c={bounce:{translateY:["0%","-5%","0%","-5%","0%","-5%","0%"],transition:{yoyo:3,repeatDelay:4,duration:2,delay:1,ease:"anticipate"}},shake:{translateX:["0%","-2%","2%","-2%","2%","-2%","0%"],transition:{yoyo:3,repeatDelay:4,duration:.5,delay:1,ease:"easeInOut"}},tremble:{translateX:["0%","-2%","2%","-2%","2%","-2%","0%"],transition:{yoyo:3,repeatDelay:.5,duration:.3,delay:1,ease:"easeInOut"}},iBg:{opacity:.2,width:"100%",height:"100%"},aBg:{opacity:1,width:"100%",height:"100%"},eBg:{opacity:.2,width:"100%",height:"100%"},aC:{left:"50%",x:"-50%",opacity:1,y:"5vh",transition:{duration:.5,delay:0}},iCC:{scaleX:1,left:"50%",x:"-50%",y:"5vh",opacity:1},iCL:{scaleX:1,left:"-50%",x:"-50%",y:"5vh",opacity:1},iCR:{scaleX:1,left:"150%",x:"-50%",y:"5vh",opacity:1},tC:{duration:5,delay:2.2},prevC:{scaleX:1,y:"-10vh",opacity:.7,transition:{duration:.3,delay:.2}},eC:{y:"-200px",opacity:0,transition:{duration:.3}},mirror:{scaleX:-1},reverseMirror:{scaleX:1},iM:{opacity:0,left:"50%",x:"-50%",y:"10vh",transition:{duration:.5,delay:.5},scale:1},aM:{opacity:1,left:"50%",x:"-50%",y:"0vh",scale:.7},eM:{opacity:0,left:"50%",x:"-50%",y:"-10vh",transition:{duration:.8,delay:0},scale:.7},cM:{opacity:1,left:"50%",x:"-50%",y:"-15vh",transition:{duration:.8,delay:0},scale:1},iL:{opacity:.2,left:"-50%",x:"0%",scaleX:-1},eL:{opacity:.2,left:"-50%",x:"0%",scaleX:-1},aL:{opacity:1,left:"10px",x:"0%",scaleX:-1},pL:{opacity:.8,left:"-30px",x:"0%",scaleX:-1},iR:{opacity:.2,left:"150%",x:"-100%",scaleX:1},eR:{opacity:0,left:"150%",x:"-100%",scaleX:1},aR:{opacity:1,left:"97%",x:"-100%",scaleX:1},pR:{opacity:.8,left:"103%",x:"-100%",scaleX:1},visible:{opacity:1},invisible:{opacity:0},exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},initialLeft:{opacity:0,scaleX:-1},transition:{duration:1,delay:.8},exitTransition:{duration:.5,delay:0}},l=function(e,t){var a={transition:"exit"===e?c.exitTransition:c.transition},n=t[e];return n&&(Array.isArray(n)?a=n.reduce((function(e,t,a){return c[t]?e=Object.assign({},e,{},c[t]):t&&(e=Object.assign({},e,{},t)),e}),a):c[n]?a=Object.assign({},a,{},c[n]):n&&(a=Object.assign({},a,{},n))),t.override&&(a=Object.assign({},a,{},t.override)),a};t.a=function(e){return i.a.createElement(u,{key:"staged-"+e.id,id:"staged-"+e.id,initial:l(e.initial?"initial":"animate",e),animate:l("animate",e),exit:l("exit",e),bottom:e.bottom||(e.top?null:"0px"),top:e.top,width:e.width,height:e.height,bgColor:e.bgColor},e.children)};var u=Object(r.b)(o.b.div).withConfig({displayName:"Staged__StagedWrapper",componentId:"sc-1ggw3um-0"})([""," "," "," position:absolute;left:100px;"," ",""],(function(e){return e.bottom?"bottom: "+e.bottom+";":""}),(function(e){return e.top?"top: "+e.top+";":""}),(function(e){return e.bgColor?"background-color: "+e.bgColor+";":""}),(function(e){if(Object(s.f)("StagedWrapper props",e),e.width)return"width: "+e.width+";"}),(function(e){if(e.height)return"height: "+e.height+";"}))},wC44:function(e,t,a){}}]);
//# sourceMappingURL=views~component---src-templates-game-post-js-a4ec380bfda113b6e23e.js.map