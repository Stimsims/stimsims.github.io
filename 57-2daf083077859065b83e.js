(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"0hff":function(e,t,a){a("E5k/");var o=a("WvvM"),n=Object.assign({},o,{eqPyth:"eqPyth",figureNames:["AB","BC","AC","BD","AD","DC"],uVol:"volume",uLi:"litres",uT:"time",uMin:"minutes",uEn:"energy",uHz:"hertz",uWeight:"weight",uG:"grams",uEpg:"energyPerGram",uMat:"material",uDist:"distance",uKm:"km",uSpeed:"speed",uKmph:"kmph",vBirds:"birds",vBees:"bees",eqOxy:"eqOxy",vT:"time",vDw:"doorWardrobe",vHc:"heightChart",vSd:"showerDrip",vChh:"clockHandHour",vChm:"clockHandMin",vMv:"musicVol",vFd:"fanDial",vLl:"lampLight",vLr:"red",vLb:"blue",vLg:"green",vGp:"gamePiece",vLrb:"redblue",vLrg:"redgreen",vLbg:"bluegreen",vL:"lights",vLhs:"lhs",vScore:"score",lhsPuzA:"lhsPuzzleAdd",lhsPuzM:"lhsPuzzleMult"});e.exports=n},IwBm:function(e,t,a){a("E5k/"),a("YBKJ"),a("zGcK"),a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi");function o(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)||Math.round(e)}e.exports={calculateLinearEquation:function(e,t){var a=0;for(var o in e)a+=e[o]*t[o];return a},mapSimValues:function(e){var t={};for(var a in e)t[a]=e[a].value;return t},reverseCoefficients:function(e,t,a,o){var n,r,s=Object.keys(t),l={},i=null;s.map((function(e){i=t[e],r=(i[1]-i[0])/4,l[e]=o(Math.random()*(i[1]-r)+r,2)}));var c=0,u=0,h={};return s=s.sort((function(e,t){return l[e]>l[t]?1:-1})),log("reverseCoefficients solutions",l),a.map((function(a,r){c=0,h[a]={},s.map((function(m,d){if(i=t[m],n=l[m],d===s.length-1)u=(e-c)/l[m];else{var p=1/(.1*n)*10;log("reverseCoefficients dv "+a+" iv "+i+" c "+p),u=Math.random()*p+p,r%2==0&&(u*=-1),(Math.abs(u*l[m]-e)<10||Math.abs(u*l[m])<2)&&(u>0&&Math.abs(u)<2?u=5/u:u*=2),u=o(u,2),c+=u*l[m]}h[a][m]=u})),log("reverseCoefficients coefficients for "+a,h[a])})),{coefficients:h,solutions:l}},getCoefficientsRange:function(e,t){var a=Object.keys(e),o=0,n=0,r=0,s=0;return a.map((function(a){r+=e[a]*t[a][0],s+=e[a]*t[a][1],r>s?(n+=r,o+=s):(n+=s,o+=r)})),log("math getCoefficientRange min "+o+" max "+n+" coefficients",e),[o,n]},generateCoefficients:function(e,t){var a=Object.keys(e),n=0,r=0,s={};return a.map((function(a,l){for(n=0;0===n&&r<10;)n=Math.random()*(e[a][1]-e[a][0])+e[a][0],r++;r>=10&&(n=5*Math.random()+5),!t&&Math.random()>.5&&(n*=-1),s[a]=o(n,2),n})),s},roundTo:o,giveAnswer:function(e,t,a,o){var n=a,r=t.solutions,s=t.coefficients,l=Object.keys(s),i=function(t){for(var a in e.game.values[t]=Object.assign({},e.game.values[t],{value:o(r[t]*n,2)}),s)e.game.models[a]||(e.game.models[a]={}),e.game.models[a][t]=s[a][t],e.game.values[a]=Object.assign({},e.game.values[a],{value:s[a][t]}),e.game.values[t+"-"+a]={value:s[a][t]};e.sim.model[t]={value:r[t],range:Math.max(.1*r[t],5),description:"The solution for the variable "+t,name:"the "+t+" solution"},l.map((function(a){e.sim.model[t+"-"+a]={value:s[a][t],range:10,description:"The coefficient relating "+t+" to "+a,name:"the "+t+"-"+a+" light coefficient"}}))};for(var c in r)i(c);return e}}},Sejx:function(e,t,a){"use strict";a.r(t);a("pJf4"),a("q8oJ"),a("YbXK"),a("cFtU"),a("m210"),a("4DPX"),a("Kz6e"),a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi"),a("E5k/");var o=a("q1tI"),n=a.n(o),r=a("KZAx"),s=a("DdlY"),l=a("9RoH"),i=(a("cOeD"),a("oqX0")),c=a("OQUD"),u=a("jIds"),h=(a("gUxS"),a("IwBm")),m=a.n(h),d=(a("sC2a"),a("bdSH")),p=a("kjjs"),v=a("6sDy"),g=a("0hff"),b=a.n(g),f=a("Szez"),y=function(e,t){e[t]=e.hasOwnProperty(t)?e[t]+1:0},x=function(e){var t="";switch(e){case b.a.vMv:t="my music player volume";break;case b.a.vHc:t="my height chart";break;case b.a.vGp:t="my game piece";break;case b.a.vDw:t="my wardrobe door";break;case b.a.vLl:t="my lamp";break;case b.a.vSd:t="my shower drip";break;case b.a.vFd:t="my fan dial";break;default:t="unknown key: "+e}return t},w=function(e,t){return[{text:"The strange lights are glowing on",className:"inline",color:"primary"},{text:Object(p.listToEnglish)(t,x),className:"inline",color:"primary"},{text:". Changing these glowing things seems to cause impossible, unfathomable changes around the room. \n        You must find the values for these that cause the lights to equal "+(e||"that poem"),className:"inline"}]},k=function(e,t){var a=Object(f.b)("values",e,t,null,!0),o=(Object(f.b)("flags",e,t,null,!0),a.score.value);Object(c.f)("getBrokenDoorText score "+o);var n=Object(f.b)("meta.dvs",e,t,[]),r=(n.map((function(e){return Object(d.getRangeFraction)(a[e].min,a[e].max,a[e].value)})),n.indexOf(b.a.vLr)),s=n.indexOf(b.a.vLb),l=n.indexOf(b.a.vLg),i="On the top floor, you can see the hallway rug.";return r&&r>.7?i+=" The walls are on fire, each painting a furnace.":r&&r<.3&&(i+=" Piles of snow accumulate on the floor."),s&&s>.7?i+=" The hallway table opposite your door is massive, way bigger than it usually is. \n                                You'll struggle to squeeze past it.":s&&s<.3&&(i+=" The hallway table opposite your door is tiny, like a piece of dolls furniture."),l&&l>.7?i+=" The walls are a blinding flourescent white, as if they were light panels.":l&&l<.3&&(i+=" The hallway floor is so dark, it almost looks like a void. You'd be afraid to step on it."),[{className:"block",color:"pink",text:"\n            Where your room should lead to the family hallway, it instead looks like an elevator\n            stuck halfway between two floors. The door itself is missing. \n            "+i+"\n            On the bottom floor, you can see the tiles of your bathroom. Your dual entry\n            bathroom somehow impossibly connects right back to your bedroom. If you drop down,\n            you'll simply find yourself there again. "},{className:"block",text:" "+n.length+" lights speckle the door frame. Their intensity seems to \n        change with every loop. They seem related to the state of the broken room. \n        Though you don't know if they are the cause or the effect. It's possible\n        their effect has something to do with the equations."},o>.9?{text:"Something feels better about it though, you're sure you're getting very close"}:{text:"It still doesn't feel right. You don't think you've got the answer yet. "}]},O=function(e,t,a){var o=Object(f.b)("values",t,a,{},!0);Object(c.f)("getText getRoomEffectText values",o);var n=Object(f.b)("meta.dvs",t,a,[]),r=n.map((function(e){return Object(d.getRangeFraction)(o[e].min,o[e].max,o[e].value)})),s=r[r[n.indexOf(b.a.vLr)]],l=[];return"teapot"===e&&(s>=.7?l.push({text:"The teapot is overflowin, it's creating a stain on the desk."}):s<=.3?l.push({text:"The teapot is frozen solid, and has a crack running down its side."}):l.push({text:"The teapot is fine."})),l},j=function(e,t,a,o,n,r){Object(c.f)("getText getTextVariableObservation flags",r);var s=Object(f.b)("values",o,n,{},!0);Object(c.f)("getText getTextVariableObservation values",s);var l=Object(f.b)("meta.dvs",o,n,[]),i=l.map((function(e){return Object(d.getRangeFraction)(s[e].min,s[e].max,s[e].value)})),u=i[l.indexOf(b.a.vLr)],h=i[l.indexOf(b.a.vLb)],m=(i[l.indexOf(b.a.vLg)],Object(p.roundTo)(Object(d.getRangeFraction)(s[e].min,s[e].max,s[e].value),2)),v=[],g="";switch(e){case b.a.vDw:v.push({text:"Your wardrobe seems highly responsive to the room conditions."}),u>=1?g+="Flames sprout from the back of the wardrobe. ":i[0]>.7?g+="The wardrobe is a source of endless black smoke. ":i[0]>.3?g+="The wardrobe is normal. ":g+="The wardrobe is ice cold, with small snowflakes floating out. ",g+=m>1?"It billows out into the room, yet they never accumulate, nor have any visible effect. ":m>.7?"It migrates out into the room, yet they never accumulate. ":m>.3?"It seeps out through the small opening in the door. ":"It is are contained by the closed door. ",r.hasSeenExtremeWeather||(g+="It alarmed you at first, but eventually it was clear no lasting damage accumulated from the bizarre effects."),v.push({text:g});break;case b.a.vFd:v.push({text:"The fan dial is at "+m+" radians. There aren't any obvious effects occuring here."});break;case b.a.vHc:v.push({text:"The height chart sits at "+s[b.a.vHc].value+" "+s[b.a.vHc].unit}),h>=.7?v.push({text:"The height chart still has the same number of units, but it looks like \n                it has been stretched. It almost looks like it's actually moving, very slowly toward the ceiling."}):h<=.3&&v.push({text:"The height chart still has the same number of units, but it looks shrunken."});break;case b.a.vSd:v.push({text:"The shower is "+(m>.7?"running":"dripping")+" at around "+s[b.a.vSd].value+" "+s[b.a.vSd].unit+" per minute."});break;case b.a.vLl:m>.7?v.push({text:"The lamp is bright at about "+m+" of its brilliance."}):v.push({text:"The lamp is dimly lit, at about "+m+" of its brilliance."});break;case b.a.vMv:m>.7?v.push({text:"The music volume is loud, at about "+m+" of its maximum."}):v.push({text:"The music volume is quiet, at about "+m+" of its maximum."});break;case b.a.vGp:m>.7?v.push({text:"The game piece is close to the end, at about "+m+" of the board."}):m>.3?v.push({text:"The game piece is in the middle, at about "+m+" of the board."}):v.push({text:"The game piece is at the start, at about "+m+" of the board."});break;default:v.push({text:"No text found for iv "+e+" dv "+t+" pair"})}return a?v.push({text:"It's covered in multi-colored stars. \n                They're the same color as those on the door.",className:"block"}):v.push({text:"Only the objects covered the multi-colored stars appear to cause an effect. \n            I'll leave this alone for now",className:"block"}),Object(c.f)("getText getTextVariableObservation iv "+e+" dv "+t+" \n        red "+i[0]+" blue "+i[1]+" texts",v),v},E=function(e,t){var a=Object(f.b)("values",e,t,null,!0),o=(Object(f.b)("flags",e,t,null,!0),Object(f.b)("meta.dvs",e,t,[])),n=(o.map((function(e){return Object(d.getRangeFraction)(a[e].min,a[e].max,a[e].value)})),o.indexOf(b.a.vLr)),r=o.indexOf(b.a.vLb),s=o.indexOf(b.a.vLg),l=(Object(f.b)("values."+b.a.vLr+"Score.value",e,t,0,!0),Object(f.b)("values."+b.a.vLb+"Score.value",e,t,0,!0),Object(f.b)("values."+b.a.vLg+"Score.value",e,t,0,!0),Object(f.b)("values.score.value",e,t,0,!0)),i=[];return l>.95?i.push({text:"While I couldn't forget the broken reality, I've also never seen it since. \n        Though When I enter a room, I'm still afraid that I'll never be able to leave it again.\n        But that's the only I'll effect I've suffered since."}):l>.7?(n&&n>.7?i.push({text:"Even in the coldest winters, the air feels swealtering to me. People give me odd looks when\n                I wear a singlet in the snow, and I still sweat."}):n&&n<.3&&i.push({text:"I still feel cold, even when inches away from an open flame. I gave up trying to get warm long ago. \n                Though people still look at me strangely when I shiver in the hottest heat waves."}),r&&r>.7?i.push({text:"Everything was a little too large, including people. While I looked normal to others, I was always a little bit too small for every chair, every table, every bed. \n                I was able to hide my struggles though, over compensating for my losses."}):r&&r<.3&&i.push({text:"Everything was too small, including the people. Though I did learn to adjust how I moved, how I acted, \n                in such a way that it must have looked only slightly odd to people around me."}),s&&s>.7?i.push({text:"People find my constant sunglasses strange, and my constantly dilated pupils stranger still, but not enough to comment, usually."}):s&&s<.3&&i.push({text:"I began to use a blind seers stick, probing the ground as I walked. Some people thought a \n            fully sighted person using such a stick was offensive, but most never commented."})):(n&&(n>.7||n<.3)&&i.push({text:"I couldn't ignore the pain, I couldn't hide it, \n            and no one else could see the cause. "}),(r&&(r>.7||r<.3)||s&&(s>.7||s<.3))&&i.push({text:"I couldn't adjust to my broken perspective on the world. "}),i.push({text:"When every effort proved futile, they put me away\n        in a padded box, and I haven't seen anyone but paid professionals since."}),i.push({text:"Please wait, results being calculated...",className:"block",color:"secondary"})),i},I=function(e,t){var a=Object(f.b)("values",e,t,null,!0),o=(Object(f.b)("flags",e,t,null,!0),Object(f.b)("meta.dvs",e,t,[])),n=(o.map((function(e){return Object(d.getRangeFraction)(a[e].min,a[e].max,a[e].value)})),o.indexOf(b.a.vLr)),r=o.indexOf(b.a.vLb),s=o.indexOf(b.a.vLg),l=(Object(f.b)("values."+b.a.vLr+"Score.value",e,t,0,!0),Object(f.b)("values."+b.a.vLb+"Score.value",e,t,0,!0),Object(f.b)("values."+b.a.vLg+"Score.value",e,t,0,!0),Object(f.b)("values.score.value",e,t,0,!0)),i=[];return l>.95?i.push({text:"I stepped out into the hallway. When I looked back, my room was normal.\n        The walls were normal, the floor was normal, the table was normal. \n        Everything was as it was, as if nothing had ever changed"}):l>.7?(i.push({text:"I stepped out into the hallway, \n        and while everything was a little off, I'd never been so grateful."}),n&&n>.7?i.push({text:"The pictures on the walls were still burning, \n                I was sweating profusely in the heat."}):n&&n<.3&&i.push({text:"Ice cold wind still pushed through the hallway, chilling me to the bone."}),r&&r>.7?i.push({text:"I had to squeeze past the massive table."}):r&&r<.3&&i.push({text:"I took care not to step in the tiny table"}),s&&s>.7?i.push({text:"I had to squint at the blinding light the walls produced."}):s&&s<.3&&i.push({text:"I could hardly see the floor, I moved carefully not to trip over anything."})):(n&&n>.7?i.push({text:"The pictures on the walls were still burning, \n                My skin felt like it was searing, like I was burning on the inside."}):n&&n<.3&&i.push({text:"Ice cold wind still pushed through the hallway. \n            I felt frozen through, it was hard to move."}),r&&r>.7?i.push({text:"I had to squeeze past the massive table."}):r&&r<.3&&i.push({text:"I took care not to step in the tiny table"}),s&&s>.7?i.push({text:"I had to cover my eyes to block out the light of the walls. \n            It helped little, as the same blinding light lived behind my eyelids too."}):s&&s<.3&&i.push({text:"I tried not to look down, as the floor was a terrifying, \n                black void that I did not want to gaze into."})),i.push({text:"At the end of the hall, I opened the living room door, \n        afraid of how disfigured the world might be."}),i},T=a("7sVn");a("0lmd");function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var M={push:function(e,t,a,o){var s=[{eq:"(y1-y2)/(x1-x2)",latex:Object(d.toLatex)("(y1-y2)/(x1-x2)")},{eq:"(y1-x1)/(y2-x2)",latex:Object(d.toLatex)("(y1-x1)/(y2-x2)")},{eq:"(y1+x1)/(y2+x2)",latex:Object(d.toLatex)("(y1+x1)/(y2+x2)")},{eq:"(x1-x2)/(y1-y2)",latex:Object(d.toLatex)("(x1-x2)/(y1-y2)")}],l=Object(d.getRegressionSlope)(e,t,a);return{data:e,iv:t,dv:a,formulas:s,direction:[n.a.createElement(r.a,{text:"strong positive",out:[Object(T.MCQ)(b.a.acGameMCQ,"gradient-direction",null,l>.7?100:0),{type:"set",path:"temp.node",value:"how"}]}),n.a.createElement(r.a,{text:"weak positive",out:[Object(T.MCQ)(b.a.acGameMCQ,"gradient-direction",null,l>-.3&&l<.9?100:0),{type:"set",path:"temp.node",value:"how"}]}),n.a.createElement(r.a,{text:"weak negative",out:[Object(T.MCQ)(b.a.acGameMCQ,"gradient-direction",null,l>-.9&&l<.3?100:0),{type:"set",path:"temp.node",value:"how"}]}),n.a.createElement(r.a,{text:"strong negative",out:[Object(T.MCQ)(b.a.acGameMCQ,"gradient-direction",null,l<-.7?100:0),{type:"set",path:"temp.node",value:"how"}]})],live:o,gradient:null,dataGradient:l}},dialogue:function(e,t,a,o,s,i,h){var m=Object(f.b)("temp.points",a,o,[]);switch(t){case"err":return Object(l.a)("graderr",{settings:i,viewProps:h,makeChange:s,text:["Error calculating the gradient. Make sure you pick points with different y values."],choice:{options:[n.a.createElement(r.a,{id:"graderr-ch",text:"okay",out:[{end:!0}]})]}});case"autoCalc":return Object(l.a)("calculatedValue",{settings:i,viewProps:h,makeChange:s,text:[{fontSize:"remM",text:"Automatically calculated: "+Object(f.b)("temp.gradient",a,o,null)}],choice:{options:[n.a.createElement(r.a,{id:"autoCalc-btn",text:"Yes",out:{end:!0}})]}});case"calculatedValue":return Object(l.a)("calculatedValue",{settings:i,viewProps:h,makeChange:s,text:[{text:"I calculated the gradient to be "+Object(f.b)("temp.gradient",a,o,null)}],choice:{options:[n.a.createElement(r.a,{id:"calculatedValuegrad",text:"Yes",out:{end:!0}})]}});case"calculatingValue":return Object(l.a)("calculatingValue",{settings:i,viewProps:h,makeChange:s,text:[{text:"I think the gradient would then be..."}],choice:{options:o.temp.gradientValues.map((function(e,t){return n.a.createElement(r.a,{id:"calculatingValuegrad",text:e,out:[{type:"set",path:"temp.node",value:"calculatedValue"},{type:"set",path:"temp.gradient",value:""+e},Object(T.MCQ)(b.a.acGameMCQ,"gradient-formula-value",null,0===t)]})}))}});case"calculating":var v=o.temp.subbedEqs,g=function(e,a){var o=[{type:"set",path:"temp.node",value:"calculatingValue"}],n=Object(p.roundTo)(Object(d.transformData)(a.eq,[{}]),2);o.push({type:"set",path:"temp.gradientValues",value:[n,-10*n,.01*n,1e3*n]}),o.push(Object(T.MCQ)(b.a.acGameMCQ,"gradient-formula-filled-in",null,0===a.index)),s(t,o)};return Object(l.a)("calculating",{settings:i,viewProps:h,makeChange:s,text:[{text:"I shall use the points ("+m[0].x+", "+m[0].y+") and ("+m[1].x+", "+m[1].y+") with the formula"},{latex:Object(f.b)("temp.formula",a,o,null).latex},{text:"to calculate the gradient."},{text:"That should look like"}],choice:{options:v.map((function(e,t){return n.a.createElement(r.a,{id:"calcgrad",index:t,latex:e.latex,eq:e.eq,onInput:g})}))}});case"pickPointX":case"pickPointY":if(m.length>=2){var y=[],x=Object(f.b)("temp.formula",a,o,null),w={x1:m[0].x,y1:m[0].y,x2:m[1].x,y2:m[1].y};if(w.x1===w.x2)y=[{type:"set",path:"temp.node",value:"err"}];else if(i[b.a.setDiff]<=2){y.push({type:"set",path:"temp.node",value:"autoCalc"});var k=Object(p.roundTo)(Object(d.transformData)(x.eq,[w]),2);y.push({type:"set",path:"temp.gradient",value:""+k})}else{y.push({type:"set",path:"temp.node",value:"calculating"});var O=Object(f.b)("temp.formula",a,o,null),j=[{eq:Object(d.subEqByString)(O.eq,Object.assign({},w)),latex:Object(d.subEqByString)(O.latex,Object.assign({},w))},{eq:Object(d.subEqByString)(O.eq,Object.assign({},w,{y2:w.x2,y1:w.x1})),latex:Object(d.subEqByString)(O.latex,Object.assign({},w,{y2:w.x2,y1:w.x1}))},{eq:Object(d.subEqByString)(O.eq,Object.assign({},w,{x2:w.y2,x1:w.y1})),latex:Object(d.subEqByString)(O.latex,Object.assign({},w,{x2:w.y2,x1:w.y1}))},{eq:Object(d.subEqByString)(O.eq,Object.assign({},w,{y1:w.y2,x1:w.x2})),latex:Object(d.subEqByString)(O.latex,Object.assign({},w,{y1:w.y2,x1:w.x2}))}];y.push({type:"set",path:"temp.subbedEqs",value:j})}return Object(c.f)("dialogue gradient props actions",y),void s(t,y)}var E="points: ";return m.map((function(e,t){t>0&&(E+=", "),E+="("+e.x+", "+e.y+")"})),Object(l.a)(t,{settings:i,viewProps:h,makeChange:s,text:[{text:"Pick point "+(m.length+1)+" for formula from the graph"},{text:E,className:"block"},{latex:Object(f.b)("temp.formula",a,o,null).latex}]});case"pointslope":return Object(l.a)("pointslope",{settings:i,viewProps:h,makeChange:s,text:[{text:"what is the formula to find a gradient \n                    from two points, (x1, y1) and (x2, y2)?",fontSize:"remM"}],choice:{options:Object(f.b)("temp.formulas",a,o,[]).map((function(e,t){return n.a.createElement(r.a,{id:"point-slope-"+t,latex:e.latex,fontSize:"remM",out:[{type:"set",path:"temp.node",value:"pickPointX"},{type:"set",path:"temp.formula",value:e},Object(T.MCQ)(b.a.acGameMCQ,"gradient-two-point-formula",e.eq,0===t)]})}))}});case"guess":return Object(l.a)("guess",{settings:i,viewProps:h,makeChange:s,text:["What is the gradient?"],extras:[n.a.createElement(u.a,Object.assign({},Object(p.getPar)(i,h,s,"temp.gradient"),{min:-100,max:100,step:.1,text:"red",value:Object(f.b)("temp.gradient",a,o,3)}))],choice:{options:[n.a.createElement(r.a,{text:"select",out:[{end:!0}]})]}});default:return Object(l.a)("how",{settings:i,viewProps:h,makeChange:s,text:["How should I get the gradient"],choice:{options:[n.a.createElement(r.a,{id:e+"-c1",text:"Guess",out:[{type:"set",path:"temp.node",value:"guess"}]}),n.a.createElement(r.a,{id:e+"-c1",text:"Point Slope formula",out:[{type:"set",path:"temp.node",value:"pointslope"}]})]}})}}},L={key:"descentToMadeness1",dialogue:function(e,t,a,o,s,i,c){return Object(l.a)("descentToMadeness1",{settings:i,viewProps:c,makeChange:s,text:["You wonder why this is happening to you, of all people. Was it an accident? Were you in the \n                    wrong place at the wrong time? Is it a punishment? Is it because you're special? Why you?"],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}})}},P={key:"descentToMadeness2",dialogue:function(e,t,a,o,s,i,c){return Object(l.a)("descentToMadeness2",{settings:i,viewProps:c,makeChange:s,text:["As you retrace your steps again and again, you get the sense you are being watched.\n                At this point, you'd be glad for almost anyone to show up. You've lost count of how many loops you've done already."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}})}},q={key:"descentToMadeness3",dialogue:function(e,t,a,o,s,i,c){switch(t){case"donttell":return Object(l.a)("descentToMadeness3",{settings:i,viewProps:c,makeChange:s,text:["You doubt you'll tell anyone about this either, if you ever do escape."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}});default:return Object(l.a)("descentToMadeness3",{settings:i,viewProps:c,makeChange:s,text:["When you escape, you doubt you'll ever feel completely right again. If reality\n            can break this completely, making a mockery of all the laws in all your textbooks, how could you trust it again? \n            Had this happened to others? Would they ever talk about it to anyone? Had someone told you they were stuck in a twisted pretzel of a room\n            when you were last outside, you'd have backed away slowly."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{type:"set",path:"temp.node",value:"donttell"}})]}})}}},N={key:"descentToMadeness4",dialogue:function(e,t,a,o,s,i,c){return Object(l.a)("descentToMadeness4",{settings:i,viewProps:c,makeChange:s,text:["You miss your family. You miss your friends. How long has it been since you last saw them?\n                Do they even know you're gone? Is time even passing for them? "],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}})}},D={key:"changedMultipleVariables1",dialogue:function(e,t,a,o,s,i,c){return Object(l.a)("changedMultipleVariables1",{settings:i,viewProps:c,makeChange:s,text:["Since you changed multiple variables in one loop, it's impossible to say which caused the changes in the lights. \n                        Try changing one at a time, then measuring how much change occured."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}})}},A={key:"dgBadGradient",dialogue:function(e,t,a,o,s,i,c){return Object(l.a)("changeThenGradient",{settings:i,viewProps:c,makeChange:s,text:["To find out how the independent variables really relate to the dependent variables, you'll need to be careful. \n                    You'll need to change them one at a time, then measure how the lights change."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}})}},G={key:"dgIntro",dialogue:function(e,t,a,o,s,i,c){var u=Object(f.b)("meta.dvs",a,o,null),h=Object(f.b)("meta.unlockedIvs",a,o,null),m=Object(f.b)("values."+b.a.vLhs+".value",a,o,null);switch(t){case"goal":return Object(l.a)("goal",{settings:i,viewProps:c,makeChange:s,text:["I need to find what values the "+Object(p.listToEnglish)(h)+"  need to be, \n                to make the "+Object(p.listToEnglish)(u)+" lights equal "+(m||"that poem")],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}});case"data":return Object(l.a)("data",{settings:i,viewProps:c,makeChange:s,text:["I have started collecting data on how changing the glowing objects, the "+Object(p.listToEnglish)(h)+" \n                    changes the room, and most importantly, the "+Object(p.listToEnglish)(u)+" lights"],choice:{options:[n.a.createElement(r.a,{text:"next",out:[{type:"set",path:"temp.node",value:"goal"}]})]}});case"eqsTrue":return Object(l.a)("eqsTrue",{settings:i,viewProps:c,makeChange:s,text:[{text:"I'm starting to think they might be my only way out of this nightmare.",className:"block"},{text:"If they lights need to equal "+(m||"that poem")+", and the lights are controlled by the glowing objects...\n                    then perhaps there is some configuration that will let me leave. \n                    But I have no idea to figure out what it could be..."}],choice:{options:[n.a.createElement(r.a,{text:"next",out:[{type:"set",path:"temp.node",value:"data"}]})]}});case"eqs":var d=V(null,null,a,o);return Object(l.a)("eqs",{settings:i,viewProps:c,makeChange:s,text:["And there's "+u.length+" equations"].concat(C(d.map((function(e){return{latex:e,className:"block",block:!0}})))),choice:{options:[n.a.createElement(r.a,{text:"next",out:[{type:"set",path:"temp.node",value:"eqsTrue"}]})]}});case"puzzle":return B({type:"set",path:"temp.node",value:"eqs"},a,o,s,i,c);case"sparkle":return Object(l.a)("sparkle",{settings:i,viewProps:c,makeChange:s,text:["Sparkeling stars of "+Object(p.listToEnglish)(u)+" pepper the walls. A few items in my room are smothered with them.","These items being my "+Object(p.listToEnglish)(h),"Changing them seems to trigger unfathomable effects elsewhere in the room, but only once I've broken every geometrical law\n                    in dropping from my bedroom to my dual entry bathroom once more.",{text:"The strangest thing, is the writing on the wall",className:"block"},{text:"There's a poem",className:"block"}],choice:{options:[n.a.createElement(r.a,{text:"next",out:[{type:"set",path:"temp.node",value:"puzzle"}]})]}});case"change":return Object(l.a)("intro-change",{settings:i,viewProps:c,makeChange:s,text:[{text:"Something changed. Now the world is broken. Now the world has shrunk down to just my room and ensuite. I can't leave."},{text:"Though I am thankful for the ensuite now that I think about it. I've been here for a long time...",className:"block"},{text:"Nothing is as it should be. Nothing makes sense. An action that should cause an effect no longer does.\n                Strange things cause yet stranger things. I have only just begun to learn these new blasphemous laws.",className:"block"}],choice:{options:[n.a.createElement(r.a,{id:e+"-c1",text:"next",out:[{type:"set",path:"temp.node",value:"sparkle"}]})]}});default:return Object(l.a)("intro-start",{settings:i,viewProps:c,makeChange:s,text:["I'd lived in this room all my life, never thinking about how lucky I was to be able to leave."],choice:{options:[n.a.createElement(r.a,{id:e+"-c1",text:"next",out:[{type:"set",path:"temp.node",value:"change"}]})]}})}}},R={key:"dgPhoneCall",pull:function(e,t){return{flags:Object(f.b)("flags",e,t,0,!0),allIvs:Object(f.b)("meta.allIvs",e,t,0,!0)}},dialogue:function(e,t,a,o,s,i,u){Object(f.b)("flags.dgPhoneCall",a,o,!1,!0);switch(Object(c.f)("dgPhoneCall inputs read",a),t){case"health":return Object(l.a)("health",{settings:i,viewProps:u,makeChange:s,text:["How are you feeling?"],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}});case"answerEnd":return Object(l.a)("answerEnd",{settings:i,viewProps:u,makeChange:s,text:["Operation complete. Have a pleasant day."],choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}});case"answer":return Object(l.a)("answer",{settings:i,viewProps:u,makeChange:s,text:["We can add the correct causes to your equations, \n                    if you are willing to halve your score.\n                    You'll still need to figure out their coefficients. \n                    Please note that this will overwrite any of your current coefficients.",{text:"Do you consent?",className:"block"}],choice:{options:[n.a.createElement(r.a,{text:"yes",onInput:function(e,t){var n=Object(f.b)("meta.dvs",a,o,null),r=Object(f.b)("meta.correctIvs",a,o,null,!0),l=[{type:"set",path:"temp.node",value:"answerEnd"},{type:"set",path:"flags.hadHelp",value:!0},{type:"set",path:"unlockedIvs",value:Object(f.b)("meta.allIvs",a,o,null,!0)}],i={};n.map((function(e){i[e]={},r.map((function(t){var a;i[e]=Object.assign({},i[e],((a={})[t]=Object(p.roundTo)(9*Math.random()+1,2),a))}))})),l.push({type:"set",path:"models",value:i}),s(e,l)}})]}});default:return Object(l.a)("walk",{settings:i,viewProps:u,makeChange:s,text:["\"This is the help line. We provide a range of services for your needs. \n                    Press 1 if you'd like an answer. \n                    Press 2 if you'd like to speak to a health professional\""],choice:{options:[n.a.createElement(r.a,{text:"Press 1",out:{type:"set",path:"temp.node",value:"answer"}}),n.a.createElement(r.a,{text:"Press 2",out:{type:"set",path:"temp.node",value:"health"}}),n.a.createElement(r.a,{text:"hang up",out:{end:!0}})]}})}}},z={key:"dgMirror",pull:function(e,t){var a=Object(f.b)("values",e,t,null,!0),o=Object(f.b)("flags.hasTalkedToMirror",e,t,!1,!0),n=Object(f.b)("meta.dvs",e,t,[]),r=n.map((function(e){return Object(d.getRangeFraction)(a[e].min,a[e].max,a[e].value)})),s=n.indexOf(b.a.vLr),l=n.indexOf(b.a.vLb),i=n.indexOf(b.a.vLg),c=360*l-180;return{hasTalkedToMirror:o,red:r[s],blue:r[l],green:r[i],angle:c}},dialogue:function(e,t,a,o,s,i,u){var h=o.temp.angle,m=Math.abs(o.temp.angle)>150&&!o.temp.hasTalkedToMirror;switch(Object(c.f)("dgMirror angle "+h+" canTalk "+m+" write",o),t){case"endConvo1":case"endConvo":return Object(l.a)(t,{settings:i,viewProps:u,makeChange:s,text:[{text:"The mirror doesn't respond"}],choice:{options:[n.a.createElement(r.a,{text:"Hey!",out:{type:"set",path:"temp.node",value:"endConvo"===t?"endConvo1":"endConvo"}}),n.a.createElement(r.a,{text:"back",out:{end:!0}})]}});case"solve":return Object(l.a)("solve",{settings:i,viewProps:u,makeChange:s,text:[{text:"With how the reflection is rotated, I cannot see their face, but they sound happy."},{text:"\"And that's why you're still stuck here. \n                    You're thinking about anything and everything except the problem.\"",className:"block",color:"pink"}],choice:{options:[n.a.createElement(r.a,{text:"You mean, I need to solve the problem to escape?",out:{type:"set",path:"temp.node",value:"endConvo"}})]}});case"mad":return Object(l.a)("mad",{settings:i,viewProps:u,makeChange:s,text:[{text:"\"You're not mad if you know you're mad.\""}],choice:{options:[n.a.createElement(r.a,{text:"Thanks for the support",out:{type:"set",path:"temp.node",value:"endConvo"}})]}});case"who":return Object(l.a)("who",{settings:i,viewProps:u,makeChange:s,text:[{text:"\"So many questions. You've already been given all the information you\n                    need, and all you'll ever be getting. Now it's just a question of how long it\n                    takes you to put the pieces together.\""}],choice:{options:[n.a.createElement(r.a,{text:"That makes no sense",out:{type:"set",path:"temp.node",value:"endConvo"}})]}});case"convo":return Object(l.a)("convo",{settings:i,viewProps:u,makeChange:s,text:[{text:"My reflection starts to move, while I am frozen still."},{text:"\"And that's why you're still stuck here. \n                    You're thinking about anything and everything except the problem.\"",className:"block",color:"pink"}],choice:{options:[n.a.createElement(r.a,{text:"You mean, Figure out how to make the lights equal the poem to escape?",out:{type:"set",path:"temp.node",value:"solve"}}),n.a.createElement(r.a,{text:"How are you speaking to me? Why are you doing this to me? Who do you work for?",out:{type:"set",path:"temp.node",value:"who"}}),n.a.createElement(r.a,{text:"I've gone mad...",out:{type:"set",path:"temp.node",value:"mad"}})]}});case"nothing":return Object(l.a)("nothing",{settings:i,viewProps:u,makeChange:s,text:["Nothing happens"],choice:{options:[n.a.createElement(r.a,{text:"next",out:{type:"set",path:"temp.node",value:"start"}})]}});case"start":default:return Object(l.a)("walk",{settings:i,viewProps:u,makeChange:s,text:[h>0?"My reflection is rotated to around "+o.temp.angle+" degrees away from me. They still\n                    move as I do, but they aren't oriented as they should be.":"My reflection is normal again, which is unusual now."],choice:{options:[n.a.createElement(r.a,{text:"Say: 'How am I going to get out of this?'",out:{type:"set",path:"temp.node",value:"nothing"}}),n.a.createElement(r.a,{text:"Say: 'My hair looks awful...'",out:{type:"set",path:"temp.node",value:m?"convo":"nothing"}}),n.a.createElement(r.a,{text:"back",out:{end:!0}})]}})}}},F={key:"dgHallway",pull:function(e,t){return{score:Object(f.b)("values.score.value",e,t,0,!0)}},dialogue:function(e,t,a,o,s,i,c){o.temp.score;switch(t){case"world":return Object(l.a)("world",{settings:i,viewProps:c,makeChange:s,text:C(E(a,o)),choice:{options:[n.a.createElement(r.a,{text:"next",out:{end:!0}})]}});default:return Object(l.a)("walk",{settings:i,viewProps:c,makeChange:s,text:C(I(a,o)),choice:{options:[n.a.createElement(r.a,{text:"next",out:{type:"set",path:"temp.node",value:"world"}})]}})}}};function H(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var V=function(e,t,a,o){var n,r=[],s=Object(f.b)("values."+b.a.vLhs,a,o,{value:null}).value,l=Object(f.b)("models",a,o,{},!0),i=null,c=null;if(t)i=e?((n={})[e]=l[t][e],n):l[t],c=Object(d.buildLinearEquations)(s||t,i),r.push({eq:t+": "+c.eq,latex:t+": "+c.latex});else for(var u in l){var h;i=e?((h={})[e]=l[u][e],h):l[u],c=Object(d.buildLinearEquations)(s||u,i),r.push(c)}return r},W=function(e,t,a,o,h,m,g){Object(f.b)("values",a,o,{},!0);var y=Object(f.b)("flags",a,o,{},!0),x=Object(f.b)("temp.getGradient",a,o,!1),w=Object(f.b)("temp.dv",a,o,null),k=Object(f.b)("values."+e,a,o,{}),O=Object(f.b)("models."+w+"."+e,a,o,null,!0),E="number"==typeof O,I=Object(f.b)("data.room",a,o,{}),C=Object(f.b)("meta.dvs",a,o,[],!0);if(w){var S=[],L=null;return O&&!isNaN(O)?(L=w+" = "+O+" * "+e,S.push({text:"I think the "+w+" lights and "+e+" are related by"}),S.push({latex:Object(d.toLatex)(L)})):S.push({text:"I don't know how the "+w+" lights and "+e+" are related"}),Object(l.a)(e+"-"+w,{makeChange:h,settings:m,viewProps:g,text:[{text:"Independent Variable: "+e,tag:"h2",className:"block"}].concat(S),extras:[n.a.createElement(i.a,Object.assign({className:"item-large"},Object(p.getPar)(m,g,h,"graph-wardrobe"),{iv:e,dv:w,dvDomain:[-1e3,1e3],values:Object(f.b)("values",a,o,{}),plots:[{type:"scatter",key:e+"-"+w+"-light-data",set:I.data,color:w,onClick:function(t){if(x){var n=Object(f.b)("temp.points",a,o,[]);if(Object(c.f)("graph click points",n),n.length<3){var r=t.node;h(e,[{type:"merge",array:!0,path:"temp.points",value:r}])}}}}],dataset:I,equations:V(e,w,a,o).map((function(e,t){return{eq:e,color:C[t],name:C[t]}}))})),x?n.a.createElement(s.a,Object.assign({},Object(p.getPar)(m,g,h,"getGradient-"+e),{compact:!0,minHeight:"200px",dialogue:M,onExit:function(t,a){var o=[{type:"set",path:"temp.points",value:[]},{type:"set",path:"temp.getGradient",value:!1}];if(a.temp.gradient||0===a.temp.gradient){var n,r=a.temp.dataGradient,s=Object(v.scoreDistance)(r,3,a.temp.gradient),l=Math.ceil(100*s);o.push({type:"merge",path:"models."+w,value:(n={},n[e]=Object(p.roundTo)(a.temp.gradient,2),n)}),o.push({type:"merge",path:"values."+e+"-"+w,value:Object.assign({},k,{value:Object(p.roundTo)(a.temp.gradient,2)})}),o.push({type:"merge",path:"values."+e+"-"+w,value:Object.assign({},k,{value:Object(p.roundTo)(a.temp.gradient,2)})}),o.push(Object(T.MCQ)(b.a.acGameMCQ,"gradient-correlation",null,l))}h(t,o)},write:o,read:a,merge:Object(f.b)("temp.points",a,o,null)?[{type:"set",path:"temp.points",value:Object(f.b)("temp.points",a,o,null)}]:null,addons:M.push(I.data,e,w,Object(f.b)("temp.forDialogue",a,o,{}))})):null],choice:{options:[x?null:n.a.createElement(r.a,{text:"get gradient",out:[{type:"set",path:"temp.getGradient",value:!0}]}),E?n.a.createElement(r.a,{text:"Actually I don't think these are related",out:[].concat(H(C.map((function(t){return{type:"set",path:"models."+t+"."+e,value:0}}))),H(C.map((function(t){var a;return{type:"set",path:"changes",value:(a={},a["models."+t+"."+e]=0,a)}}))))}):null,n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"temp.dv",value:f.a}]})]}})}var P=Object(f.b)("meta.unlockedIvs",a,o,[]).indexOf(e)>-1;return Object(l.a)(""+e,{settings:m,viewProps:g,makeChange:h,text:[{text:"Independent Variable: "+e,tag:"h2",className:"block"}].concat(H(j(e,w,P,a,o,y)),H(V(e,null,a,o).map((function(e){return{latex:e.latex,className:"block",block:!0}})))),extras:P?[n.a.createElement(u.a,{key:e+"-slider",id:e+"-slider",text:e+" ("+k.unit+")",min:k.min,max:k.max,step:.1,value:k.value||0,onInput:function(t,a){h(t,[{type:"merge",path:"values."+e,value:Object.assign({},k,{value:Object(p.roundTo)(a,2)})}])}})]:null,choice:{options:[].concat(H(P?C.map((function(e){return n.a.createElement(r.a,{text:e,out:{type:"set",path:"temp.dv",value:e}})})):[]),[n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:t}}]})])}})};function B(e,t,a,o,s,i){Object(f.b)("meta.dvs",t,a,[],!0);var h=Object(f.b)("values",t,a,null,!0),m=Object(f.b)("values."+b.a.vLhs,t,a,{},!0),g=m.max,y=m.min,x=Object(f.b)("values."+b.a.vLhs+".value",t,a,null,!0),w=Object(f.b)("meta."+b.a.vLhs,t,a,null,!0),k=Math.ceil(30*Math.random())+10,O=2*Math.ceil(4*Math.random())+2,j=Object(p.roundTo)(w/O+k,1),E="x = (z-"+k+")*"+O,I=Object(d.toLatex)(E).replace("z",j);Object(c.f)("tree node lhsRiddle, gameAnswer "+w+" userAnswer "+x+" \n                answerMin "+y+" answerMax "+g+"\n                result "+j+" eq "+E+" riddle "+I+" values",h);return Object(l.a)("lhsRiddle-unsolved",{settings:s,viewProps:i,makeChange:o,text:[].concat([{text:"The poem says",className:"block"},{text:"again all will be right",className:"block",color:"secondary"},{text:"when x is equal to the light",className:"block",color:"secondary"}],[{latex:I,className:"block"},x||0===x?{text:"I answered "+x}:null]),extras:[n.a.createElement(u.a,Object.assign({},Object(p.getPar)(s,i,o,"lhsRiddle-unsolved-slider"),{min:y,max:g,value:x||(g-y)/2+y,onInput:function(t,a){var n=100*Object(v.scoreDistance)(w,(g-y)/2,a);Object(c.f)("tree node lhsRiddle score "+n),o(t,[{type:"set",path:"values."+b.a.vLhs,value:Object.assign({},m,{value:a})},Object(T.MCQ)(b.a.acGameMCQ,"lhs-arithmetic-riddle",""+w,n),e])}}))],choice:{options:[n.a.createElement(r.a,{id:"lhsRiddleack",text:"next",out:e})]}})}a("Laee");var Q,K,U=a("WF96"),J=a.n(U),X=a("uHwv");a("7+Bu");function Z(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var _=((K={sim:J.a,n:{},k:b.a,checkFlags:function(e){var t,a,o,n,r=e.meta.location,s=Object.assign({},e.flags),l=e.data.room.data,i=e.meta.allIvs,u=e.values,h=u[b.a.vT].value,m=e.meta.dvs.map((function(e){Object(d.getRangeFraction)(u[b.a.vDw].min,u[b.a.vDw].max,u[b.a.vDw].value);return Object(d.getRangeFraction)(u[e].min,u[e].max,u[e].value)}));(y(s,"testFlag"),!s.hasSeenExtremeWeather&&"wardrobeDoor"===r&&(m[0]>.7||m[0]<.3)&&dw>0&&y(s,"hasSeenExtremeWeather"),h>1)&&((t=l[l.length-1],a=l[l.length-2],o=i||Object.keys(t),n=0,o.map((function(e){t[e]!==a[e]&&(Object(c.f)("checkFlags countDifferences k "+e+" s1 "+t[e]+" s2 "+a[e]),n++)})),n)>1?(y(s,"changedMultipleVariables"),s.changedMultipleVariablesLastRound=!0):s.changedMultipleVariablesLastRound=!1);return s},trigger:function(e,t){return{}}}).trees=((Q={}).intro=function(e,t,a){return{node:"intro",label:b.a.aclocStory,view:function(o,r){return n.a.createElement(s.a,Object.assign({},Object(p.getPar)(t,a,r,"intro-dialogue"),{dialogue:G,move:"hub",write:o,read:e}))}}},Q.hub=function(e,t,a){return{node:"hub",label:b.a.aclocStory,view:function(o,s){var i=Object(f.b)("temp.solveError",e,o,null),u=(Object(f.b)("values."+b.a.vScore,e,o,{}).value,Object(f.b)("values."+b.a.vLhs,e,o,{value:null}).value),h=Object(f.b)("meta.dvs",e,o,[]),m=Object(f.b)("meta.unlockedIvs",e,o,[]),p=V(null,null,e,o,a);p=p.map((function(e,t){return{eq:h[t]+" light: "+e.eq,latex:h[t]+": "+e.latex}}));var v=function(e,t){var a=Object(f.b)("values",e,t,null,!0),o=(Object(f.b)("flags",e,t,null,!0),Object(f.b)("meta.dvs",e,t,[])),n=o.map((function(e){return Object(d.getRangeFraction)(a[e].min,a[e].max,a[e].value)})),r=o.indexOf(b.a.vLr),s=(o.indexOf(b.a.vLb),o.indexOf(b.a.vLg),Object(d.getRangeFraction)(a[b.a.vDw].min,a[b.a.vDw].max,a[b.a.vDw].value)),l=[];return 10===a.time.value&&l.push({className:"block",text:"My mind cracked a little the first time I saw my room. Though I'm fine now."}),n[r]>=1?(s<.3?l.push({text:"The wardrobe door is cracking, you can see flames reaching through the door crack. The teapot is"}):l.push({text:"The wardrobe is on fire, though the room never fills with smoke."}),l.push({text:"The teapot is bubbling over with water, it's dripping down your desk."})):n[r]>=.7?(s<.3?l.push({text:"Smoke is escaping through the wardrobe door crack."}):l.push({text:"Smoke is billowing out of the wardrobe."}),l.push({text:"Steam is coming out of the teapot."})):n[r]>=.3||(s<.3?l.push({text:"The wardrobe door is frozen and cracked."}):l.push({text:"Snow flakes blow out of the wardrobe door"}),l.push({text:"The teapot is cracked."})),Object(c.f)("getRoomText dvFractions "+n+" values",a),l}(e,o);return Object(l.a)("hub",{settings:t,viewProps:a,makeChange:s,text:[{text:"My Room",tag:"h2",className:"block"}].concat(Z(v),Z(w(u,m)),[i?{text:i,color:"orange",className:"block"}:null,{text:"Your equations:",className:"block"}],Z(p.map((function(e){var t;return(t={latex:e.latex,block:!0,className:"block"}).block=!0,t})))),choice:{options:[n.a.createElement(r.a,{text:"Go to your wardrobe",out:[{type:"set",path:"move",value:{location:"wardrobe"}}]}),n.a.createElement(r.a,{text:"Go to your desk",out:[{type:"set",path:"move",value:{location:"desk"}}]}),n.a.createElement(r.a,{text:"Go back to your bathroom",out:[{type:"set",path:"move",value:{location:"bathroom"}}]}),n.a.createElement(r.a,{text:"Go to the broken bedroom door",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]}),n.a.createElement(r.a,{text:"Look at the poem",out:[{type:"set",path:"meta.lhsRiddle",value:"hub"},{type:"set",path:"move",value:{location:"lhsRiddle"}}]})]}})}}},Q.loop=function(e,t,a){return{node:"loop",label:b.a.aclocStory,view:function(o,i){if(Object(c.f)("tree node loop read",e),e.sentHash!==e.recievedHash)return Object(l.a)("loopWait",{settings:t,viewProps:a,makeChange:i,text:"Waiting for results..."});var u=function(e,t){var a=Object(f.b)("flags",e,t,{},!0),o=Object(f.b)("values",e,t,{},!0);return a.changedMultipleVariables>1&&!a.changedMultipleVariables1?D:a.badGradientAnswer&&!a.dgBadGradient?A:o.time.value>0&&!a.descentToMadeness1?L:o.time.value>0&&!a.descentToMadeness2?P:o.time.value>0&&!a.descentToMadeness3?q:o.time.value>0&&!a.descentToMadeness4?N:void 0}(e,o);return u?n.a.createElement(s.a,Object.assign({},Object(p.getPar)(t,a,i,u.key),{dialogue:u,move:"hub",write:o,read:e,onExit:function(e,t){return[{type:"set",path:"move",value:{location:"hub"}},{type:"set",path:"flags."+u.key,value:!0}]},addons:u.pull?u.pull(e,o):null})):Object(l.a)("loop",{settings:t,viewProps:a,makeChange:i,text:[{text:"Loop",color:"pink"}],choice:{options:[n.a.createElement(r.a,{id:"loop",text:"next",out:[{type:"set",path:"move",value:{location:"hub"}}]})]}})}}},Q.solve=function(e,t,a){return{node:"solve",label:b.a.aclocStory,view:function(o,s){Object(c.f)("tree solve settings",t),Object(c.f)("tree solve read",e),Object(c.f)("tree solve write",o);var i=Object(f.b)("meta.dvs",e,o,[],!0),h=Object(f.b)("models",e,o,{},!0),m=Object(f.b)("values."+b.a.vLhs,e,o,{value:null}).value;Object(f.b)("values",e,o,{},!0);m||0===m||(x=[{text:"The left hand side must equal something before the system can be solved",color:"red"},{text:"Look around to find the value of the left hand side of the equation",color:"red"}]);var v=Object(f.b)("temp.solution",e,o,null),g=Object(f.b)("temp.updated",e,o,!1),y=V(null,null,e,o,a);Object(c.f)("tree solve eqs",y);var x,w,k,O="";if(1===t.difficulty&&!v&&!x&&(m||0===m)){w=y.map((function(e){return e.eq})),Object(c.f)("tree solve solving system",w);try{v=Object(d.solveEquations)(w),k=Object.keys(v),Object(c.f)("tree solve solveEquations solution",v),O="If your equations are right, then "+Object(p.listToEnglish)(k.map((function(e,t){return e+" needs to equal "+Object(p.roundTo)(v[e],2)})))+" to get the lights to the right value."}catch(M){Object(c.f)("tree solve solveEquations error",M),v=null,x=[{text:"Unable to solve system in its current state",color:"red",className:"text-center block"},{text:"Here is a tutorial on how to build and solve systems of linear equations",leave:!0,href:"https://www.khanacademy.org/test-prep/sat/sat-math-practice/new-sat-heart-of-algebra/v/sat-math-h7-harder",className:"text-center block"}]}}Object(c.f)("tree solve rendering, error "+x);var j=function(e,t){s("solveSlider",{type:"merge",path:"values."+e,value:{value:t}})};if(x)return Object(l.a)("solve-solution",{settings:t,viewProps:a,makeChange:s,text:[{text:"Solve the Equations",tag:"h2",className:"block"}].concat(Z(x),Z(y.map((function(e){return{latex:e.latex,block:!0,className:"block"}})))),choice:{options:[n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]})]}});if(v){var E=0,I=Object(f.b)("values",e,o,{},!0);Object(c.f)("tree solve current values",I),Object(c.f)("tree solve current solutionKeys",k);var T=[],C=0;for(var S in v)E>0&&(", ",", "),S+" = "+(C=Object(p.roundTo)(v[S],2)),S+" = "+I[S].value,T.push(n.a.createElement(r.a,{text:"Set "+S+" to "+C,out:{type:"merge",path:"values."+S,value:{value:C}}})),E++;return Object(l.a)("solve-solution",{settings:t,viewProps:a,makeChange:s,text:[{text:"Auto solved",className:"block"}].concat(Z(y.map((function(e){return{latex:e.latex,block:!0,className:"block"}}))),[O]),extras:Z(k.map((function(e){return n.a.createElement(u.a,{id:e,value:I[e].value,min:-100,max:100,step:.1,text:"value of "+e,onInput:j})}))),choice:{options:[n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]})]}})}if(g)return Object(l.a)("solve-updated",{settings:t,viewProps:a,makeChange:s,text:[{text:"The room has been updated, hopefully those solutions are right.",className:"block"}],choice:{options:[n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]})]}});return Object(l.a)("solve-ui",{settings:t,viewProps:a,makeChange:s,extras:[n.a.createElement(X.a,{id:"hub-solver",onInput:function(e,t){Object(c.f)("tree solve linearsystemsolver answer",t),s("solution-update",[{type:"set",path:"temp.updated",value:!0}].concat(Z(function(e){var t=[];for(var a in e)t.push({type:"set",path:"values."+a+".value",value:Object(p.roundTo)(e[a],2)});return t}(t))))},lhs:i.map((function(e){return m})),coefficients:h})],choice:{options:[n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]})]}})}}},Q.bedroomExit=function(e,t,a){return{node:"bedroomExit",label:b.a.aclocStory,view:function(o,s){var i=Object(f.b)("values.score.value",e,o,0,!0),c=Object(f.b)("values."+b.a.vLhs+".value",e,o,null,!0),u=Object(f.b)("values",e,o,0,!0);u=m.a.mapSimValues(u);var h=Object(f.b)("meta.dvs",e,o,[],!0),d=V(null,null,e,o),p=h.map((function(e){return m.a.calculateLinearEquation(e,u)}));return Object(l.a)("bedroomExit",{settings:t,viewProps:a,makeChange:s,text:[{text:"Broken Bedroom Exit",tag:"h2",className:"block"}].concat(Z(k(e,o)),Z(d.map((function(e){return{latex:e.latex,block:!0,className:"block"}}))),[{text:"Currently the equations equal",className:"block"}],Z(p.map((function(e,t){return isNaN(e)?{text:h[t]+" = nothing",className:"block"}:{text:h[t]+" = "+c,className:"block"}}))),[{text:"All the equations need to equal "+(c||0===c?c:" that poem.")+". \n                            You can change the equations by changing the gradients of the variables around the room.",className:"block"}]),choice:{options:[i<.99?n.a.createElement(r.a,{text:"Drop down into bathroom",out:[{type:"set",path:"move",value:{location:"loop"}}]}):null,n.a.createElement(r.a,{text:i<.99?"Crawl up into hallway":"Walk into hallway",out:[{type:"set",path:"move",value:{location:i<.99?"warning":"hallway"}}]}),n.a.createElement(r.a,{text:"solve equations",out:[{type:"set",path:"move",value:{location:"solve"}}]}),n.a.createElement(r.a,{text:"Look at the poem",out:[{type:"set",path:"meta.lhsRiddle",value:"bedroomExit"},{type:"set",path:"move",value:{location:"lhsRiddle"}}]}),n.a.createElement(r.a,{text:"back",out:[{type:"set",path:"move",value:{location:"hub"}}]})]}})}}},Q.lhsRiddle=function(e,t,a){return{node:"lhsRiddle",label:b.a.aclocStory,view:function(o,n){return B({type:"set",path:"move",value:{location:Object(f.b)("meta.lhsRiddle",e,o,"hub",!0)}},e,o,n,t,a)}}},Q.desk=function(e,t,a){return{node:"desk",label:b.a.aclocStory,view:function(o,s){return Object(c.f)("tree node desk read",e),Object(l.a)("desk",{settings:t,viewProps:a,makeChange:s,text:[{text:"The desk is an embarassing mess.",className:"block"},{text:"You have tried cleaning it, but it returns to this state when you loop.",className:"block"},{text:"On the desk there is a phone, a music player, a lamp, a teapot and some pens.",className:"block"}],choice:{options:[n.a.createElement(r.a,{id:"wd",text:"Look at the phone",out:[{type:"set",path:"move",value:{location:"phone"}}]}),n.a.createElement(r.a,{id:"wd",text:"Look at music player",out:[{type:"set",path:"move",value:{location:"music"}}]}),n.a.createElement(r.a,{id:"tp",text:"Look at lamp",out:[{type:"set",path:"move",value:{location:"lamp"}}]}),n.a.createElement(r.a,{id:"tp",text:"Look at teapot",out:[{type:"set",path:"move",value:{location:"teapot"}}]}),n.a.createElement(r.a,{id:"gb",text:"back",out:[{type:"set",path:"move",value:{location:"hub"}}]})]}})}}},Q.phone=function(e,t,a){return{node:"phone",label:b.a.aclocStory,view:function(e,o){return Object(l.a)("phone",{settings:t,viewProps:a,makeChange:o,text:[{text:"Your Phone",tag:"h2",className:"block"},{text:"When the looping began, the phone was the first thing you tried to use.",className:"block"},{text:"You tried to call for help, but it has no reception.",className:"block"}],choice:{options:[n.a.createElement(r.a,{id:"phone-t2",text:"Look at contacts",out:[{type:"set",path:"move",value:{location:"phoneContacts"}}]}),n.a.createElement(r.a,{id:"phone-t1",text:"back",out:[{type:"set",path:"move",value:{location:"desk"}}]})]}})}}},Q.phoneContacts=function(e,t,a){return{node:"phoneContacts",label:b.a.aclocStory,view:function(e,o){return Object(l.a)("phoneContacts",{settings:t,viewProps:a,makeChange:o,text:[{text:"Your Contacts",tag:"h2",className:"block"},{text:"You usually have hundreds of contacts that you've picked up over the years.",className:"block"},{text:"Now, there are less than a dozen. Their icons are missing, and strange characters \n                        appear where their names and numbers should be.",className:"block"},{text:"Except for one. It's a number you don't recognize. \n                            It's 2424 3535 4646. It has no message history with you.",className:"block"}],choice:{options:[n.a.createElement(r.a,{id:"phoneContacts-t2",text:"Call the number",out:[{type:"set",path:"move",value:{location:"phoneCall"}}]}),n.a.createElement(r.a,{id:"phoneContacts-t1",text:"back",out:[{type:"set",path:"move",value:{location:"desk"}}]})]}})}}},Q.phoneCall=function(e,t,a){return{node:"phoneCall",label:b.a.aclocStory,view:function(o,r){return n.a.createElement(s.a,Object.assign({},Object(p.getPar)(t,a,r,"phoneCall"),{dialogue:R,onExit:function(e,t){var a=[{type:"set",path:"move",value:{location:"desk"}},{type:"set",path:"flags."+R.key,value:!0}];return t.models&&(a.push({type:"set",path:"meta.unlockedIvs",value:t.unlockedIvs}),a.push({type:"set",path:"models",value:t.models}),a.push({type:"merge",path:"flags",value:t.flags})),a},write:o,read:e}))}}},Q.music=function(e,t,a){return{node:"music",label:b.a.aclocStory,view:function(o,n){return W(b.a.vMv,"desk",e,o,n,t,a)}}},Q.lamp=function(e,t,a){return{node:"music",label:b.a.aclocStory,view:function(o,n){return W(b.a.vLl,"desk",e,o,n,t,a)}}},Q.teapot=function(e,t,a){return{node:"teapot",label:b.a.aclocStory,view:function(o,s){return Object(l.a)("teapot",{settings:t,viewProps:a,makeChange:s,text:[{text:"Teapot",tag:"h2",className:"block"}].concat(Z(O("teapot",e,o))),choice:{options:[n.a.createElement(r.a,{id:"teapot-t1",text:"back",out:[{type:"set",path:"move",value:{location:"desk"}}]})]}})}}},Q.bathroom=function(e,t,a){return{node:"bathroom",label:b.a.aclocStory,view:function(e,o){return Object(l.a)("bathroom",{settings:t,viewProps:a,makeChange:o,text:[{text:"My Bathroom",tag:"h2",className:"block"},{text:"The shower head is dripping rapidly. The water is pooling in the recess."},{text:"From this direction, the broken door just connects smoothly to the entrance of my room."}],choice:{options:[n.a.createElement(r.a,{id:"wd",text:"Look at the mirror",out:[{type:"set",path:"move",value:{location:"mirror"}}]}),n.a.createElement(r.a,{id:"wd",text:"Look at the shower",out:[{type:"set",path:"move",value:{location:"shower"}}]}),n.a.createElement(r.a,{id:"gb",text:"Go through to the room",out:[{type:"set",path:"move",value:{location:"hub"}}]})]}})}}},Q.mirror=function(e,t,a){return{node:"mirror",label:b.a.aclocStory,view:function(o,r){return n.a.createElement(s.a,Object.assign({},Object(p.getPar)(t,a,r,"mirror"),{dialogue:z,move:"bathroom",write:o,read:e,addons:z.pull(e,o)}))}}},Q.shower=function(e,t,a){return{node:"shower",label:b.a.aclocStory,view:function(o,n){return W(b.a.vSd,"bathroom",e,o,n,t,a)}}},Q.wardrobe=function(e,t,a){return{node:"wardrobe",label:b.a.aclocStory,view:function(e,o){return Object(l.a)("wardrobe",{settings:t,viewProps:a,makeChange:o,text:[{text:"There is smoke billowing out of the wardrobe door, though it never seems to accumulate in the room. Its slightly ajar.\n                        There's a height chart beside it. ",color:"pink"}],choice:{options:[n.a.createElement(r.a,{id:"wd",text:"Look at wardrobe door",out:[{type:"set",path:"move",value:{location:"wardrobeDoor"}}]}),n.a.createElement(r.a,{id:"wd",text:"Look at fan dial",out:[{type:"set",path:"move",value:{location:"fanDial"}}]}),n.a.createElement(r.a,{id:"hc",text:"Look at the height chart",out:[{type:"set",path:"move",value:{location:"heightChart"}}]}),n.a.createElement(r.a,{id:"gb",text:"Go back",out:[{type:"set",path:"move",value:{location:"hub"}}]})]}})}}},Q.fanDial=function(e,t,a){return{node:"fanDial",label:b.a.aclocStory,view:function(o,n){return W(b.a.vFd,"wardrobe",e,o,n,t,a)}}},Q.wardrobeDoor=function(e,t,a){return{node:"wardrobeDoor",label:b.a.aclocStory,view:function(o,n){return W(b.a.vDw,"wardrobe",e,o,n,t,a)}}},Q.heightChart=function(e,t,a){return{node:"heightChart",label:b.a.aclocStory,view:function(o,n){return W(b.a.vHc,"wardrobe",e,o,n,t,a)}}},Q.warning=function(e,t,a){return{node:"warning",label:b.a.aclocStory,view:function(e,o){return Object(l.a)("warning",{settings:t,viewProps:a,makeChange:o,text:["The hallway looks as broken as your room.",{text:"You have a bad feeling that once you leave, the changes will be permanent. \n                                You need to make sure you have it right.",color:"orange",className:"block"}],choice:{options:[n.a.createElement(r.a,{text:"enter hallway",out:[{type:"set",path:"move",value:{location:"hallway"}}]}),n.a.createElement(r.a,{text:"back to bedroom",out:[{type:"set",path:"move",value:{location:"bedroomExit"}}]})]}})}}},Q.hallway=function(e,t,a){return{node:"hallway",label:b.a.aclocStory,view:function(o,r){return n.a.createElement(s.a,Object.assign({},Object(p.getPar)(t,a,r,"hallway"),{dialogue:F,onExit:function(){return[{type:"set",path:"move",value:{location:"intro"}},{type:"set",path:"meta.gameover",value:!0}]},write:o,read:e,addons:F.pull(e,o)}))}}},Q),K);t.default=_},WF96:function(e,t,a){var o,n;function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}a("pJf4"),a("q8oJ"),a("m210"),a("4DPX"),a("Kz6e"),a("E5k/"),a("cFtU"),a("YbXK"),a("ToIb"),a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi");var l=a("0hff"),i=a("IwBm"),c=((o={})[l.vHc]=!0,o[l.vGp]=!0,o[l.vDw]=!0,o[l.vMv]=!0,o[l.vLl]=!0,o[l.vSd]=!0,o[l.vFd]=!0,o),u=function(e,t,a,o,n){var s=new Set(Array.isArray(t)?t:Object.keys(t)),l=new Set(Array.isArray(e)?e:Object.keys(e));a.map((function(e){l.delete(e)}));var i=new Set([].concat(r(s),r(l))),c=i.size<o?i.size:o,u=Array.from(l);for(n&&(u=n(u));s.size<c&&u.length>0;)s.has(u[0])||s.add(u[0]),u=u.slice(1);return Array.from(s)},h=function(e,t){var a=0;e.map((function(e){t.indexOf(e)>-1&&a++}));var o=(a+1)/t.length;return Math.ceil(o*Object.keys(c).length)},m=((n={simInit:function(e,t,a,o,n,r,s){var d,p,v=new t.GameInstance("intro");v.sim.ranges={},v.sim.ranges[l.vHc]=[0,220],v.sim.ranges[l.vGp]=[0,50],v.sim.ranges[l.vDw]=[0,120],v.sim.ranges[l.vMv]=[0,20],v.sim.ranges[l.vLl]=[0,15],v.sim.ranges[l.vSd]=[0,10],v.sim.ranges[l.vFd]=[0,3*Math.PI/4];var g=Math.ceil(a.getRange(10,100));v.game.values[l.vHc]={value:a.getRange(v.sim.ranges[l.vHc][1],v.sim.ranges[l.vHc][1]),unit:"cm",max:v.sim.ranges[l.vHc][1],min:v.sim.ranges[l.vHc][0]},v.game.values[l.vGp]={value:a.getRange(v.sim.ranges[l.vGp][0],v.sim.ranges[l.vGp][1]),unit:"cm",max:v.sim.ranges[l.vGp][1],min:v.sim.ranges[l.vGp][0]},v.game.values[l.vDw]={value:a.getRange(v.sim.ranges[l.vDw][0],v.sim.ranges[l.vDw][1]),unit:"cm",max:v.sim.ranges[l.vDw][1],min:v.sim.ranges[l.vDw][0]},v.game.values[l.vMv]={value:a.getRange(v.sim.ranges[l.vMv][0],v.sim.ranges[l.vMv][1]),unit:"decibels",max:v.sim.ranges[l.vMv][1],min:v.sim.ranges[l.vMv][0]},v.game.values[l.vLl]={value:a.getRange(v.sim.ranges[l.vLl][0],v.sim.ranges[l.vLl][1]),unit:"watt",max:v.sim.ranges[l.vLl][1],min:v.sim.ranges[l.vLl][0]},v.game.values[l.vFd]={value:a.getRange(v.sim.ranges[l.vFd][0],v.sim.ranges[l.vFd][1]),unit:"radians",max:v.sim.ranges[l.vFd][1],min:v.sim.ranges[l.vFd][0]},v.game.values[l.vSd]={value:a.getRange(v.sim.ranges[l.vSd][0],v.sim.ranges[l.vSd][1]),unit:"litres",max:v.sim.ranges[l.vSd][1],min:v.sim.ranges[l.vSd][0]},v.game.values[l.vScore]={value:0,max:1,min:0},v.game.values[l.vLhs]={value:0,max:100,min:10},v.game.values[l.vL]={value:0};var b=e[l.setDiff]>3?3:2,f=[],y=0,x=Object.keys(c),w=0,k=[l.vLr,l.vLb];for(b>2&&k.push(l.vLg);f.length<b&&w<100;)y=o.getRandomIndex(x.length),-1===f.indexOf(x[y])&&f.push(x[y]),w++;w>100&&(f=[l.mMv,l.vDw]),v.game.meta.allIvs=Object.keys(v.sim.ranges),v.game.meta.unlockedIvs=u(c,[f[0]],f.slice(1),h([],f),o.shuf),v.game.meta.dvs=k,v.game.meta[l.vLhs]=g,v.game.meta.correctIvs=f,v.sim.ivs=f,v.sim.dvs=k;var O={},j={};f.map((function(e,t){O[e]=v.sim.ranges[e],j[e]=v.sim.ranges[e]}));var E,I={};v.game.models={};var T=i.reverseCoefficients(g,j,k,o.roundTo);E=T.coefficients,k.map((function(e){I[e]=i.getCoefficientsRange(E[e],O),v.game.models[e]={}}));var C=function(e){v.sim.model[e]={value:T.solutions[e],range:Math.max(.1*T.solutions[e],5),description:"The solution for the variable "+e,name:"the "+e+" solution"},k.map((function(t){v.sim.model[e+"-"+t]={value:T.coefficients[t][e],range:10,description:"The coefficient relating "+e+" to "+t,name:"the "+e+"-"+t+" light coefficient"}}))};for(var S in T.solutions)C(S);v.sim.ranges=Object.assign({},v.sim.ranges,{},I),v.sim.coefficients=E,v.game.values.time={value:1,unit:"days",min:0,max:1e3},v.game.data={};var M,L=t.Dataset(l.vLr,((d={})[l.vLr]="red light",d[l.vLb]="blue light",d));L.data=[];for(var P=0;P<10;P++)M=P<9?n.randomizeValues(v.game.values):v.game.values,v.game.values[l.vT].value=P,M.time.value=P+1,L.data.push(m.data.lights(v.sim.coefficients,i.mapSimValues(M),o,n));var q=L.data[L.data.length-1];return k.map((function(e){v.game.values[e]={value:q[e],min:o.roundTo(I[e][0],2),max:o.roundTo(I[e][1],2),unit:"watt"},v.sim.model[e]={value:g,range:10,description:"The user sum for "+e+" light",name:"the "+e+" light sum"}})),v.game.data={room:L},v.sim.values=((p={time:v.game.values.time})[l.vLhs]={value:g,min:1,max:100,unit:"days"},p),v},loop:function(e,t,a,o,n,s,d,p,v){var g={},b=t.sim.ivs,f=t.sim.dvs,y=t.sim.values.time.value+1;t.game.values.time.value=y;t.game.values[l.vDw].value;var x,w=t.game.data.room.data,k=(t.game.flags,t.game.meta.unlockedIvs),O=t.sim.coefficients,j=i.mapSimValues(t.game.values),E=t.sim.coefficients,I=t.game.models,T=t.sim.values[l.vLhs],C=(t.sim.model,b.map((function(e){return p.scoreDistance(t.sim.model[e].value,10,j[e])}))),S=(p.getFinalScore(C),[]);f.map((function(e){for(var t in I[e])if(x=E[e][t]){var a=s.roundTo(p.scoreDistance(x,10,I[e][t]));a<=0&&(g["game.flags.badGradientAnswer"]=!0),S.push({key:t+"-"+e,score:a})}}));p.getFinalScore(S);var M,L=f.map((function(e){var a=i.calculateLinearEquation(t.game.models[e],j);return g["game.values."+e]={value:a,min:0,max:1},p.scoreDistance(T.value,10,a)})),P=(p.getFinalScore(L),[]),q=[];for(var N in E)for(var D in M=E[N])P.push({score:p.scoreDistance(M[D],5,I[N][D])}),k.indexOf(D)>-1&&q.push({score:p.scoreDistance(M[D],5,I[N][D])});var A=p.getFinalScore(P);if(p.getFinalScore(q)>.5&&k.length<Object.keys(c).length){var G,R=h(k,b),z=0;b.map((function(e,t){G||-1!==k.indexOf(e)||(G=e,z=t)}));var F=u(c,[].concat(r(k),[G]),b.slice(z+1),R);g["game.meta.unlockedIvs"]=F,k=F}var H=m.data.lights(O,j,s,d),Y=function(e,t,a){var o=a||Object.keys(e),n=0;return o.map((function(a){e[a]!==t[a]&&n++})),n}(w[w.length-1],H,k);return g["game.flags.changedMultipleVariables"]=Y,g["game.values.time.value"]=y,g["game.values."+l.vScore+".value"]=A,g["sim.values.time.value"]=y,g["sim.values.red.value"]=H.red,g["sim.state.room"]=H,g["game.data.room.data."+w.length]=H,g}}).data={lights:function(e,t,a,o){var n=Object.assign({},t);for(light in e)n[light]=a.roundTo(i.calculateLinearEquation(e[light],t),3);return n}},n);e.exports=m}}]);
//# sourceMappingURL=57-2daf083077859065b83e.js.map