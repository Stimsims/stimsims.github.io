(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"00v5":function(e,t,a){},OdzH:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),r=a("Zrqu"),o=a("OQUD"),i=a("hyCQ"),l=a("LJHC"),u=a("jU1A");a("00v5");t.a=function(e){var t,a=Object(n.useState)(!0),s=a[0],m=a[1];Object(n.useEffect)((function(){var e=Object(o.d)();m(e)}),[]);return c.a.createElement(u.a,null,c.a.createElement(r.a,((t={id:"account-page-title"}).id="account-page-title",t.tag="h3",t.className="text-center",t.fontSize="remL",t.color="primary",t),"Your Settings"),c.a.createElement(l.a,{className:"text-center margin-vertical-auto posRel"},c.a.createElement(r.a,{key:"account-analytics-title",id:"account-analytics-title",tag:"h3",className:"block "+(s?"text-center":"text-left")},"Your Google Analytics Settings"),!s&&c.a.createElement(i.a,{id:"optout-switch",label1:"opt out",label2:"dont opt out",onInput:function(){Object(o.g)(!s);var e=Object(o.d)();m(e)},active:s}),c.a.createElement(r.a,{key:"account-text",id:"account-text",className:"block text-center"},s?"This site will not collect annonymous site use data from you":"This site is collecting annonymous site use data from you. This data tracks your movement around the site, and your in game answers. \n                It is used in the publicly available game play datasets.")))}},qSc5:function(e,t,a){"use strict";a("6kNP"),a("8npG"),a("E5k/");var n=a("o0o1"),c=a.n(n),r=(a("ls82"),a("q1tI")),o=a.n(r),i=a("vOnD"),l=(a("Wbzz"),a("CF71")),u=a("Zrqu"),s=a("55FY"),m=a("Mdna"),d=a("+HCB"),p=(a("/gC5"),a("4tu4")),f=a("Db+8"),g=a("3vKF"),y=a("Xjse"),b=a("OQUD"),h=a("kjjs"),E=(a("qzLg"),a("LJHC"),a("jU1A")),v=a("Uhxb"),x=a.n(v),k=(a("7sVn"),a("ZMKu")),w=a("Laee"),N=Object(f.a)((function(e){var t=Object(r.useState)("ref-start"),a=t[0];t[1];return Object(b.f)("Refund view type "+e.type+" refundState "+a+" \n        count "+e.player[x.a.getCounterKey(e.type)]+" props",e),a?o.a.createElement(O,null,o.a.createElement("div",{className:"refund-wrapper"},o.a.createElement(k.a,null,o.a.createElement(k.b.div,Object.assign({key:a},w.a),e.player&&("ref-start"===a?o.a.createElement(o.a.Fragment,null,(e.player[x.a.getUnlockedKey(e.type)],o.a.createElement(d.a,{icon:e.unlocked?"icon-unlocked":"icon-lock"})),o.a.createElement(u.a,{id:e.type+"-text"}," ",e.text),!1):"ref-load"===a?o.a.createElement(l.a,{delay:0,length:"30px",height:"80px"}):"ref-suc"===a?o.a.createElement(u.a,{className:"inline-block"},"refund successful"):o.a.createElement(u.a,{className:"inline-block"},"There was an error refunding your payment")))))):null})),O=i.b.div.withConfig({displayName:"refund__RefundWrapper",componentId:"sc-1r8aobf-0"})(["min-height:80px;margin:10px auto;position:relative;.refund-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;button{position:absolute;transform:translate(-80%,-30%);}}"]);function j(e,t,a,n,c,r,o){try{var i=e[r](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(n,c)}var S=function(e){var t=Object(r.useState)(null),a=t[0],n=t[1],i=Object(r.useState)("start"),d=i[0],p=i[1],f=Object(r.useState)(!1),h=f[0],v=f[1],k=Object(r.useState)(!1),w=k[0],O=k[1],S=Object(r.useState)(null),T=S[0],P=S[1];Object(r.useEffect)((function(){var t=null;if(e.isSignedIn&&e.user)if(a)p("account");else{var c=e.user.createTime,r=new Date(c),o=(new Date).getTime()-r.getTime()>1e4;p("loading"),o?Y():t=setTimeout((function(){Y()}),1e4-o)}else a&&n(null);return function(){t&&clearTimeout(t)}}),[e.isSignedIn,e.isConnected]);var A=function(e){p("start"),P(e)},Y=function t(a){void 0===a&&(a=0),Object(b.f)("Account getPlayerData calling attempt "+a+" uid "+e.user.uid),e.user&&e.doSubscribe("getPlayer",(function(){return Object(g.d)(e.user.uid)}),(function(e){if(Object(b.f)("Account getPlayerData success",e),!e||!e.hasOwnProperty("reportcount"))throw new Error("Could not find a valid account");n(e),p("account")}),g.b,(function(e){"No such record found"===e&&a<=3?setTimeout((function(){t(a+1)}),3e3):A(e)}))},R=function(e,t,n){return o.a.createElement(N,{key:n,type:n,unlocked:t,player:a,text:e})},_=function(e,t,a){if(t)return o.a.createElement(I,null,o.a.createElement(u.a,{className:"inline",tag:"h4"},e,":"),o.a.createElement(u.a,{className:"inline"},t))},L=function(){v(!0)},z=function(){v(!1)},F=function(){var t,a=(t=c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user&&e.user.uid?(a=e.user.uid,p("deleting"),e.doSubscribe("deleteUserData",(function(){return Object(y.g)(a)}),Object(y.d)((function(t){Object(b.f)("AccountPage deletePlayer firestore success",t),e.doSubscribe("deleteAccount",e.deleteUser(),(function(e){Object(b.f)("AccountPage doDeleteAccount delete account success"),p("start"),n(null),O(!1)}),y.c,A)})),y.c,A)):P("Your user id is not available. We cannot delete your account with out your user id. Logging in again may fix this problem.");case 1:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,c){var r=t.apply(e,a);function o(e){j(r,n,c,o,i,"next",e)}function i(e){j(r,n,c,o,i,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();return o.a.createElement(E.a,null,T?o.a.createElement(u.a,{key:"account-error",tag:"p",className:"text-center"},T):a?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{key:"your-account",id:"your-account",tag:"h3",className:"text-center",fontSize:"remL"},"Your Account"),w&&o.a.createElement(u.a,{key:"account-delete",id:"account-delete",className:"block"},"Your account was successfully deleted"),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{key:"account-unlocked",id:"account-unlocked",tag:"h3",className:"text-left block",margin:"20px 0 0 0 !important"},"Unlocked Features"),o.a.createElement(u.a,{tag:"p",className:"text-left block"},"These features require a Google Account. They can be accessed from the report section of a game."),o.a.createElement(D,null,R("Unlimited Reports",a[x.a.getUnlockedKey(x.a.PRODUCT_REPORT)],x.a.PRODUCT_REPORT),R("Unlimited Exams",a[x.a.getUnlockedKey(x.a.PRODUCT_EXAM)],x.a.PRODUCT_EXAM))),e.user?o.a.createElement(U,null,o.a.createElement("div",{className:"info-section"},o.a.createElement(u.a,{tag:"h3",className:"inlineblock",margin:"20px 0 10px 0 !important"},"The information given by your authentication provider"),o.a.createElement(u.a,{tag:"p",className:"text-left"},"None of this information is shared with third parties, with the exception for Google Firebase, which handles authentication services."),o.a.createElement("ol",{className:"info-list"},_("Your E-mail",e.user.email),_("Your Display Name",e.user.displayName),_("Phone Number",e.user.phoneNumber),_("Your Provider",e.user.provider),_("Your account creation date",e.user.createTime),_("Your last login date",e.user.lastTime),o.a.createElement(I,null,o.a.createElement(u.a,{tag:"h4"},"Your Display Photo")),e.user.photoURL&&o.a.createElement("div",{className:"info text-left user-icon"},o.a.createElement("img",{src:e.user.photoURL}))),o.a.createElement(u.a,{tag:"p",className:"text-center"},"Deleting your account will permanently remove all your data and any payments you've made."),o.a.createElement("div",{className:"text-center"},o.a.createElement(m.a,{onInput:L,compact:!0,padding:"10px 40px",margin:"auto"},"Delete your Account")))):o.a.createElement(u.a,{tag:"p",className:"text-center"},"Your user information was not found."),o.a.createElement(s.a,{id:"delete-account-modal",active:h,onClose:z},"deleting"!==d&&o.a.createElement("div",{className:"block text-center"},o.a.createElement(u.a,{tag:"h3",className:"block text-center"},"Are you sure you want to delete your account?"),o.a.createElement(u.a,{className:"block text-center"},"This will delete your user information, all of your exams, and your unlocked features"),o.a.createElement(m.a,{onInput:z,compact:!0},"No"),o.a.createElement(m.a,{onInput:F,compact:!0},"Yes")),"deleting"===d&&o.a.createElement(C,null,o.a.createElement(l.a,{delay:0,text:"Deleting your account"})))):"loading"===d?o.a.createElement(C,null,o.a.createElement(l.a,{delay:0,text:"Getting your account information"})):"start"===d?null:o.a.createElement(u.a,{key:"account-offline",text:"You must be signed in to see your account"}))},T=Object(f.a)(Object(p.a)((function(e){return o.a.createElement(k.a,null,e.isSignedIn&&o.a.createElement(k.b.div,Object.assign({key:"account"},w.a),o.a.createElement(S,e)),!e.isSignedIn&&o.a.createElement(k.b.div,Object.assign({key:"account-btn"},w.a),o.a.createElement(m.a,{onInput:function(){e.doSignIn({},0)},compact:!0,bgColor:"primaryD",padding:"10px 40px"},"Sign In to Account")))}),Object(h.getUrl)(),!1)),I=(t.a=T,i.b.div.withConfig({displayName:"user__ListItem",componentId:"sc-15z6kra-0"})([""])),U=i.b.section.withConfig({displayName:"user__UserInfo",componentId:"sc-15z6kra-1"})(["text-align:left;margin-top:50px;margin:auto;max-width:",";.user-icon{height:250px;}.user-icon img{float:left;height:200px;max-width:200px;margin-right:10px;}.info-list{margin:auto;max-width:",";}"],(function(e){return e.theme.mediaL}),(function(e){return e.theme.mediaM})),C=i.b.div.withConfig({displayName:"user__LoadingWrapper",componentId:"sc-15z6kra-2"})(["position:relative;height:100px;"]),D=i.b.div.withConfig({displayName:"user__FeatureStatusWrapper",componentId:"sc-15z6kra-3"})(["text-align:center;max-width:",";margin:auto;"],(function(e){return e.theme.mediaM}))}}]);
//# sourceMappingURL=views~component---src-pages-account-js-cb93da1021a8995178e5.js.map