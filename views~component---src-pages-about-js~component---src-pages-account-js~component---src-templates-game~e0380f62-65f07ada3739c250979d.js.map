{"version":3,"sources":["webpack:///./src/mycomponents/views/hoc/Subscribable/utilities.js","webpack:///./src/mycomponents/views/hoc/Subscribable/index.js","webpack:///./src/mycomponents/views/Button/v1/Button.css.js","webpack:///./src/mycomponents/views/Button/v1/Button.js"],"names":["logAndRej","reject","err","id","sendError","message","makeCancelable","promise","hasCanceled_","Promise","resolve","then","val","isCanceled","log","logAndRes","error","cancel","SubscriptionHoC","View","props","sub","useState","Subscription","useEffect","unsubscribe","catchCancel","cat","onError","e","result","doSubscribe","Error","cancelable","add","catch","subscribe","promiseObj","Item","styled","button","theme","getColor","bgColor","disabled","neutral","color","text","width","compact","margin","padding","height","borders","animS","pressed","NormalButton","handleClick","bind","state","ev","stopPropagation","preventDefault","this","onInput","name","out","setState","render","key","slim","onClickCapture","className","classNames","type","hover","Text","children","React","PureComponent","displayName"],"mappings":"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","file":"views~component---src-pages-about-js~component---src-pages-account-js~component---src-templates-game~e0380f62-65f07ada3739c250979d.js","sourcesContent":["\r\nimport {log, sendError} from 'utilities/Measure';\r\n\r\nconst logAndRes = (resolve, val, id) => {\r\n  log(`subscribable id ${id} resolving val`, val);\r\n  resolve(val)\r\n}\r\nconst logAndRej = (reject, err, id) => {\r\n //log(`subscribable id ${id} rejective message ${err.message} err`, err);\r\n  sendError(`subscribable logAndRej ${err.message}`, false);\r\n  reject(err);\r\n}\r\nexport const makeCancelable = (promise, id) => {\r\n    let hasCanceled_ = false;\r\n  \r\n    const wrappedPromise = new Promise((resolve, reject) => {\r\n      promise.then(\r\n        val => hasCanceled_ ? logAndRej(reject,{isCanceled: true}, id) :logAndRes(resolve, val, id),\r\n        error => hasCanceled_ ? logAndRej(reject,{isCanceled: true}, id) : logAndRej(reject, error, id)\r\n      );\r\n    });\r\n  \r\n    return {\r\n      promise: wrappedPromise,\r\n      cancel() {\r\n        hasCanceled_ = true;\r\n      },\r\n    };\r\n};\r\n\r\n","\r\nimport React, { useState, useEffect, useLayoutEffect, useMemo } from 'react';\r\nimport {Subscription} from 'rxjs';\r\nimport {makeCancelable} from './utilities';\r\nimport {log, sendError} from 'utilities/Measure';\r\n\r\nconst SubscriptionHoC = View => props => {\r\n    const [sub] = useState(new Subscription());\r\n    useEffect(()=>{\r\n        return ()=>{\r\n            sub.unsubscribe();\r\n        }\r\n       }, [sub])\r\n\r\n    const catchCancel = (id, cat, onError) => (e) => {\r\n        log(`subscribable error id ${id} e`, e);\r\n        if(e && !e.isCanceled){\r\n            try{\r\n                log(`subscribable error id ${id} calling catch`, cat);\r\n                let result = cat(e);\r\n                if(result.promise){\r\n                    log(`subscribable error result is a promise`, result.promise);\r\n                    doSubscribe(id, result.promise, result.then, result.cat, onError);\r\n                    return;\r\n                }else if(typeof result === 'string'){\r\n                    sendError(`subscribable catchCancel id ${id} error: ${result}`, false);\r\n                    onError(result);\r\n                    return;\r\n                }else{//else if(result === true){\r\n                    sendError(`subscribable catchCancel id ${id} invalid response`, false);\r\n                    throw Error(`subscribable error handler returned invalid response`)\r\n                   // return;\r\n                }\r\n            }catch(e){\r\n                sendError(`unhandled subscribable catch error ${e.message}`, false);\r\n                throw new Error(`unhandled subscribable promise error`);\r\n            }\r\n        }else{\r\n            log(`subscribable error id ${id} there is no error?`, e);\r\n        }\r\n    }\r\n    const cancel = (cancelable) => {\r\n        return ()=>{cancelable.cancel()};\r\n    }\r\n    const doSubscribe = (id, promise, then, cat, onError) => {\r\n        let cancelable = makeCancelable(promise(), id);\r\n\r\n        sub.add(cancel(cancelable));\r\n        cancelable\r\n        .promise\r\n        .then(then)\r\n        .catch(catchCancel(id, cat, onError))\r\n    }\r\n    const onSubscribe = (promiseObj) => {\r\n        let cancelable = makeCancelable(promiseObj.promise(), props.id);\r\n        sub.add(()=>{cancelable.cancel()});\r\n        cancelable\r\n        .promise\r\n        .then(promiseObj.then)\r\n        .catch(promiseObj.cat)\r\n    }\r\n    return <View {...props} subscribe={onSubscribe} doSubscribe={doSubscribe} />\r\n}\r\n\r\nexport default SubscriptionHoC;","import styled from 'styled-components';\r\n\r\nexport const Item = styled.button`\r\n    border: 0;\r\n    outline: none;\r\n    box-sizing: border-box;\r\n    left: 0px; top: 0px;\r\n    background-color:${props => props.theme.getColor(props.theme, props.bgColor, 'primaryD')};\r\n    ${props => {\r\n        if(props.disabled){\r\n            return `background-color: ${props.theme.neutral};`\r\n        }\r\n    }}\r\n    border-radius: 5px;\r\n    color:  ${props => props.theme.getColor(props.theme, props.color, props.theme.text)};\r\n    min-width: 80px;\r\n    ${props =>{\r\n        if(props.width){\r\n            return `width: ${props.width};`\r\n        }else if(props.compact){\r\n            return '';\r\n        }else{\r\n            return 'width: 98%;'\r\n        }\r\n    }}\r\n    margin: ${props =>{\r\n        //  margin: ${props => props.margin?props.margin:'20px auto'};\r\n        if(props.margin){\r\n            return props.margin;\r\n        }else if(props.compact){\r\n            return '5px';\r\n        }else{\r\n            return '2px auto'\r\n        }\r\n    }};\r\n    padding:  ${props =>{\r\n        //  margin: ${props => props.margin?props.margin:'20px auto'};\r\n        if(props.padding){\r\n            return props. padding;\r\n        }else if(props.compact){\r\n            return '5px';\r\n        }else{\r\n            return '20px auto'\r\n        }\r\n    }};\r\n    ${props => {\r\n        if(props.height) return `height: ${props.height};`\r\n    }};\r\n    vertical-align: middle;\r\n    ${props => {\r\n        if(props.borders) return `border-left: 2px solid grey; border-right: 2px solid grey;`\r\n    }}\r\n    ${props => {\r\n        if(props.height) return `line-height: ${props.height};`\r\n    }};\r\n\r\n\r\n  \r\n    transition: opacity ${props => props.theme.animS} ease, background-color 0.1s ease;\r\n    &:hover{\r\n        opacity: 1;\r\n    }\r\n    &:active{\r\n        background-color: ${props => props.theme.getColor(props.theme, props.pressed, 'primary')}\r\n    }\r\n\r\n`\r\n/*\r\n\r\n    ${props => {\r\n        if(props.hover){\r\n            return `\r\n                transition: opacity ${props => props.theme.animS} ease;\r\n                &:hover{\r\n                    opacity: 1;\r\n                }\r\n            `\r\n        }\r\n    }}\r\n\r\n\r\n        ${props => {\r\n        if(props.glow){\r\n            return `\r\n                background-color: ${props.theme.primaryD};\r\n                box-shadow: 0 0 2px #fff, 0 0 3px #fff, 0 0 5px ${props.theme.getColor(props.theme, props.glow)}, \r\n                0 0 6px ${props.theme.getColor(props.theme, props.glow)}, 0 0 8px ${props.theme.getColor(props.theme, props.glow)}, \r\n                0 0 10px ${props.theme.getColor(props.theme, props.glow)}, 0 0 20px ${props.theme.getColor(props.theme, props.glow)};\r\n                \r\n                `\r\n        }\r\n    }}\r\n*/","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './styles.css';\r\nimport {Item, Container} from './Button.css.js';\r\nimport Text from 'views/Text/Text/v1/Text.js';\r\nimport {log, sendError} from 'utilities/Measure.js';\r\n\r\nexport default class NormalButton extends React.PureComponent{\r\n    constructor(props){\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.state = {\r\n            error: null\r\n        }\r\n    }\r\n    handleClick(ev){\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        if(this.props.onInput){ //sometimes a parent may handle the click\r\n            try{\r\n                this.props.onInput(this.props.name?this.props.name:this.props.id, this.props.out || ev);\r\n             }catch(e){\r\n                 this.setState({error: this.props.error?this.props.error:'error'});\r\n                 sendError(`Btn ${this.props.id} ${e.message}`, false);\r\n                 log(`button error`,e);\r\n             }\r\n        }\r\n    }\r\n    render(){\r\n        return <Item key={this.props.id} id={this.props.id} \r\n            slim={this.props.slim} \r\n            color={this.props.color} \r\n            name={this.props.name} \r\n            compact={this.props.compact}\r\n            width={this.props.width}\r\n            height={this.props.height}\r\n            margin={this.props.margin}\r\n            padding={this.props.padding}\r\n            color={this.props.color}\r\n            bgColor={this.props.bgColor}\r\n            onClickCapture={this.handleClick} \r\n            className={this.props.classNames} \r\n            type={this.props.type || null}\r\n            key={this.props.id}\r\n            //glow={this.props.glow}\r\n            hover={this.props.hover}\r\n            aria-labelledby={this.props['aria-labelledby']}\r\n            disabled={this.props.disabled}\r\n        >\r\n            {this.state.error && <Text color=\"red\">{this.state.error}</Text>}\r\n             {!this.state.error && this.props.children}\r\n    </Item>\r\n    }\r\n}\r\nNormalButton.displayName = \"ViewBtnBtn\";\r\nNormalButton.propTypes = {\r\n    id: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.number\r\n      ]),\r\n    onInput: PropTypes.func, //card form uses button, but does not use onInput on trigger, so not required\r\n    error: PropTypes.string //message to display if error occurs\r\n}\r\n"],"sourceRoot":""}